import{S as K,i as Y,s as G,k,l as y,m as b,h as d,n as v,b as I,g as $,v as T,f as L,d as S,J as W,K as X,e as H,L as Z,a as C,c as F,M as O,D as _,N as x,I as U,q,y as P,r as D,z as N,A as R,u as A,B as V,O as ee,p as Q}from"../chunks/index.41f98ac2.js";import{d as te,a as le,m as ne}from"../chunks/dances-store.8a5ae34b.js";function j(i,e,a){const r=i.slice();return r[6]=e[a],r}function se(i){let e,a,r,n;function u(l,c){return l[6].href?oe:re}let s=u(i),o=s(i);function t(){return i[4](i[6])}return{c(){e=k("li"),o.c(),a=C(),this.h()},l(l){e=y(l,"LI",{class:!0});var c=b(e);o.l(c),a=F(c),c.forEach(d),this.h()},h(){v(e,"class","outlined thin file svelte-1i7xeq7"),O(e,"selected",i[1]===i[6].file)},m(l,c){I(l,e,c),o.m(e,null),_(e,a),r||(n=x(e,"click",t),r=!0)},p(l,c){i=l,s===(s=u(i))&&o?o.p(i,c):(o.d(1),o=s(i),o&&(o.c(),o.m(e,a))),c&3&&O(e,"selected",i[1]===i[6].file)},i:U,o:U,d(l){l&&d(e),o.d(),r=!1,n()}}}function ae(i){let e,a,r,n=i[6].name+"",u,s,o,t,l;return o=new B({props:{menuContents:i[6].contents,selectedFile:i[1]}}),o.$on("fileSelected",i[3]),{c(){e=k("li"),a=k("details"),r=k("summary"),u=q(n),s=C(),P(o.$$.fragment),t=C(),this.h()},l(c){e=y(c,"LI",{class:!0});var h=b(e);a=y(h,"DETAILS",{class:!0});var f=b(a);r=y(f,"SUMMARY",{class:!0});var m=b(r);u=D(m,n),m.forEach(d),s=F(f),N(o.$$.fragment,f),f.forEach(d),t=F(h),h.forEach(d),this.h()},h(){v(r,"class","svelte-1i7xeq7"),v(a,"class","svelte-1i7xeq7"),v(e,"class","folder svelte-1i7xeq7")},m(c,h){I(c,e,h),_(e,a),_(a,r),_(r,u),_(a,s),R(o,a,null),_(e,t),l=!0},p(c,h){(!l||h&1)&&n!==(n=c[6].name+"")&&A(u,n);const f={};h&1&&(f.menuContents=c[6].contents),h&2&&(f.selectedFile=c[1]),o.$set(f)},i(c){l||($(o.$$.fragment,c),l=!0)},o(c){S(o.$$.fragment,c),l=!1},d(c){c&&d(e),V(o)}}}function re(i){let e=i[6].name+"",a;return{c(){a=q(e)},l(r){a=D(r,e)},m(r,n){I(r,a,n)},p(r,n){n&1&&e!==(e=r[6].name+"")&&A(a,e)},d(r){r&&d(a)}}}function oe(i){let e,a=i[6].name+"",r,n;return{c(){e=k("a"),r=q(a),this.h()},l(u){e=y(u,"A",{href:!0});var s=b(e);r=D(s,a),s.forEach(d),this.h()},h(){v(e,"href",n=i[6].href)},m(u,s){I(u,e,s),_(e,r)},p(u,s){s&1&&a!==(a=u[6].name+"")&&A(r,a),s&1&&n!==(n=u[6].href)&&v(e,"href",n)},d(u){u&&d(e)}}}function z(i){let e,a,r,n;const u=[ae,se],s=[];function o(t,l){return t[6].type==="folder"?0:1}return e=o(i),a=s[e]=u[e](i),{c(){a.c(),r=H()},l(t){a.l(t),r=H()},m(t,l){s[e].m(t,l),I(t,r,l),n=!0},p(t,l){let c=e;e=o(t),e===c?s[e].p(t,l):(T(),S(s[c],1,1,()=>{s[c]=null}),L(),a=s[e],a?a.p(t,l):(a=s[e]=u[e](t),a.c()),$(a,1),a.m(r.parentNode,r))},i(t){n||($(a),n=!0)},o(t){S(a),n=!1},d(t){s[e].d(t),t&&d(r)}}}function ie(i){let e,a,r=i[0],n=[];for(let s=0;s<r.length;s+=1)n[s]=z(j(i,r,s));const u=s=>S(n[s],1,1,()=>{n[s]=null});return{c(){e=k("ul");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=y(s,"UL",{class:!0});var o=b(e);for(let t=0;t<n.length;t+=1)n[t].l(o);o.forEach(d),this.h()},h(){v(e,"class","svelte-1i7xeq7")},m(s,o){I(s,e,o);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null);a=!0},p(s,[o]){if(o&7){r=s[0];let t;for(t=0;t<r.length;t+=1){const l=j(s,r,t);n[t]?(n[t].p(l,o),$(n[t],1)):(n[t]=z(l),n[t].c(),$(n[t],1),n[t].m(e,null))}for(T(),t=r.length;t<n.length;t+=1)u(t);L()}},i(s){if(!a){for(let o=0;o<r.length;o+=1)$(n[o]);a=!0}},o(s){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)S(n[o]);a=!1},d(s){s&&d(e),W(n,s)}}}function ce(i,e,a){const r=X();let{menuContents:n}=e,{selectedFile:u=null}=e;function s(l){r("fileSelected",l)}function o(l){Z.call(this,i,l)}const t=l=>s(l.file);return i.$$set=l=>{"menuContents"in l&&a(0,n=l.menuContents),"selectedFile"in l&&a(1,u=l.selectedFile)},[n,u,s,o,t]}class B extends K{constructor(e){super(),Y(this,e,ce,ie,G,{menuContents:0,selectedFile:1})}}function J(i){let e,a,r=i[0].title+"",n,u,s,o;return s=new B({props:{menuContents:i[1]}}),{c(){e=k("div"),a=k("p"),n=q(r),u=C(),P(s.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0,style:!0});var l=b(e);a=y(l,"P",{class:!0});var c=b(a);n=D(c,r),c.forEach(d),u=F(l),N(s.$$.fragment,l),l.forEach(d),this.h()},h(){v(a,"class","svelte-e2eikq"),v(e,"class","col"),Q(e,"max-width","40ch")},m(t,l){I(t,e,l),_(e,a),_(a,n),_(e,u),R(s,e,null),o=!0},p(t,l){(!o||l&1)&&r!==(r=t[0].title+"")&&A(n,r);const c={};l&2&&(c.menuContents=t[1]),s.$set(c)},i(t){o||($(s.$$.fragment,t),o=!0)},o(t){S(s.$$.fragment,t),o=!1},d(t){t&&d(e),V(s)}}}function fe(i){let e,a,r,n,u,s,o,t,l,c,h;l=new B({props:{menuContents:i[2],selectedFile:i[0]}}),l.$on("fileSelected",i[5]);let f=i[0]&&J(i);return{c(){e=k("meta"),a=C(),r=k("section"),n=k("h1"),u=q("Pick a dance"),s=C(),o=k("div"),t=k("div"),P(l.$$.fragment),c=C(),f&&f.c(),this.h()},l(m){const p=ee("svelte-t32ptj",document.head);e=y(p,"META",{name:!0,content:!0}),p.forEach(d),a=F(m),r=y(m,"SECTION",{class:!0});var E=b(r);n=y(E,"H1",{});var w=b(n);u=D(w,"Pick a dance"),w.forEach(d),s=F(E),o=y(E,"DIV",{class:!0});var g=b(o);t=y(g,"DIV",{class:!0,style:!0});var M=b(t);N(l.$$.fragment,M),M.forEach(d),c=F(g),f&&f.l(g),g.forEach(d),E.forEach(d),this.h()},h(){document.title="Home",v(e,"name","description"),v(e,"content","Svelte demo app"),v(t,"class","col dance-picking ta-center"),Q(t,"max-width","60ch"),v(o,"class","cols"),v(r,"class","svelte-e2eikq")},m(m,p){_(document.head,e),I(m,a,p),I(m,r,p),_(r,n),_(n,u),_(r,s),_(r,o),_(o,t),R(l,t,null),_(o,c),f&&f.m(o,null),h=!0},p(m,[p]){const E={};p&1&&(E.selectedFile=m[0]),l.$set(E),m[0]?f?(f.p(m,p),p&1&&$(f,1)):(f=J(m),f.c(),$(f,1),f.m(o,null)):f&&(T(),S(f,1,1,()=>{f=null}),L())},i(m){h||($(l.$$.fragment,m),$(f),h=!0)},o(m){S(l.$$.fragment,m),S(f),h=!1},d(m){d(e),m&&d(a),m&&d(r),V(l),f&&f.d()}}}function ue(i,e,a){let r=[];for(const l of te){const c=l.clipRelativeStem,h=c.split("/");let f=null;for(let m=0;m<h.length;m++){const p=h[m],E=m===h.length-1;if(E&&f){f.contents.push({type:"file",name:l.title,file:l});break}else E&&r.push({type:"file",name:l.title,file:l});if(!f){const g=r.find(M=>M.name===p);if(g){if(g.type!=="folder")throw new Error("Invalid menu item type (probably due to overlapping folder and file names) for path:"+c);f=g;continue}f={type:"folder",name:p,contents:new Array,expanded:!1},r.push(f);continue}const w=f.contents.find(g=>g.name===p);if(!w){const g={type:"folder",name:p,contents:new Array,expanded:!1};f.contents.push(g),f=g;continue}if((w==null?void 0:w.type)==="folder"){f=w;continue}throw new Error("Invalid menu item type (probably due to overlapping folder and file names) for path:"+c)}}let n=null,u=[],s=[];function o(l){n===l?a(0,n=null):a(0,n=l)}const t=l=>o(l.detail);return i.$$.update=()=>{i.$$.dirty&1&&a(4,u=le[n==null?void 0:n.clipRelativeStem]??[]),i.$$.dirty&16&&a(1,s=u.map(function(l){return{type:"file",name:l.tree_name,file:l,href:"/teachlesson/"+ne(l)}}))},[n,s,r,o,u,t]}class he extends K{constructor(e){super(),Y(this,e,ue,fe,G,{})}}export{he as default};
