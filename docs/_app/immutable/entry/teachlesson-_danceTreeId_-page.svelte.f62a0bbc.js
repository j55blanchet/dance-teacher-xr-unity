import{S as we,i as Ee,s as Pe,C as st,k,l as T,m as w,h as _,n as p,b as q,D as m,N as ae,E as nt,F as it,G as at,g as D,d as B,L as Ke,a as y,c as I,M as ie,p as W,v as Ne,f as Ce,J as Qe,K as ot,e as qe,y as oe,z as re,A as ce,B as ue,w as x,P as ee,q as G,O as rt,r as J,Q as Re,u as We,R as te,T as ct,H as ut,t as Be,U as ft,V as Le}from"../chunks/index.41f98ac2.js";import{j as M}from"../chunks/singletons.8be7deff.js";import{p as dt}from"../chunks/stores.0bfd17d2.js";/* empty css                                                           */import{g as _t}from"../chunks/dances-store.51bf466b.js";import{V as ht}from"../chunks/VideoWithSkeleton.c77d6bb3.js";function mt(l){let t,e,s,n,r;const o=l[1].default,a=st(o,l,l[0],null);return{c(){t=k("button"),e=k("span"),a&&a.c(),this.h()},l(i){t=T(i,"BUTTON",{class:!0});var d=w(t);e=T(d,"SPAN",{class:!0});var v=w(e);a&&a.l(v),v.forEach(_),d.forEach(_),this.h()},h(){p(e,"class","svelte-1syvu4"),p(t,"class","svelte-1syvu4")},m(i,d){q(i,t,d),m(t,e),a&&a.m(e,null),s=!0,n||(r=ae(t,"click",l[2]),n=!0)},p(i,[d]){a&&a.p&&(!s||d&1)&&nt(a,o,i,i[0],s?at(o,i[0],d,null):it(i[0]),null)},i(i){s||(D(a,i),s=!0)},o(i){B(a,i),s=!1},d(i){i&&_(t),a&&a.d(i),n=!1,r()}}}function pt(l,t,e){let{$$slots:s={},$$scope:n}=t;function r(o){Ke.call(this,l,o)}return l.$$set=o=>{"$$scope"in o&&e(0,n=o.$$scope)},[n,s,r]}class vt extends we{constructor(t){super(),Ee(this,t,pt,mt,Pe,{})}}M.disable_scroll_handling;const gt=M.goto;M.invalidate;M.invalidateAll;M.preload_data;M.preload_code;M.before_navigate;M.after_navigate;function He(l,t,e){const s=l.slice();return s[11]=t[e],s}function Oe(l,t,e){const s=l.slice();return s[14]=t[e],s}function Ue(l){let t;return{c(){t=k("span"),this.h()},l(e){t=T(e,"SPAN",{class:!0,style:!0});var s=w(t);s.forEach(_),this.h()},h(){p(t,"class","progress outlined svelte-g9xqg2"),W(t,"width",l[5]*100+"%")},m(e,s){q(e,t,s)},p(e,s){s&32&&W(t,"width",e[5]*100+"%")},d(e){e&&_(t)}}}function je(l){let t;return{c(){t=k("span"),this.h()},l(e){t=T(e,"SPAN",{class:!0,style:!0});var s=w(t);s.forEach(_),this.h()},h(){p(t,"class","beat-line svelte-g9xqg2"),W(t,"left",(l[14]-l[2].start_time)/(l[2].end_time-l[2].start_time)*100+"%")},m(e,s){q(e,t,s)},p(e,s){s&20&&W(t,"left",(e[14]-e[2].start_time)/(e[2].end_time-e[2].start_time)*100+"%")},d(e){e&&_(t)}}}function Me(l){let t,e=l[14]>l[2].start_time&&l[14]<l[2].end_time&&je(l);return{c(){e&&e.c(),t=qe()},l(s){e&&e.l(s),t=qe()},m(s,n){e&&e.m(s,n),q(s,t,n)},p(s,n){s[14]>s[2].start_time&&s[14]<s[2].end_time?e?e.p(s,n):(e=je(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){e&&e.d(s),s&&_(t)}}}function ze(l){let t,e,s=l[2].children,n=[];for(let o=0;o<s.length;o+=1)n[o]=Ge(He(l,s,o));const r=o=>B(n[o],1,1,()=>{n[o]=null});return{c(){t=k("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){t=T(o,"DIV",{class:!0});var a=w(t);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(_),this.h()},h(){p(t,"class","children svelte-g9xqg2")},m(o,a){q(o,t,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(t,null);e=!0},p(o,a){if(a&31){s=o[2].children;let i;for(i=0;i<s.length;i+=1){const d=He(o,s,i);n[i]?(n[i].p(d,a),D(n[i],1)):(n[i]=Ge(d),n[i].c(),D(n[i],1),n[i].m(t,null))}for(Ne(),i=s.length;i<n.length;i+=1)r(i);Ce()}},i(o){if(!e){for(let a=0;a<s.length;a+=1)D(n[a]);e=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)B(n[a]);e=!1},d(o){o&&_(t),Qe(n,o)}}}function Ge(l){let t,e;return t=new Xe({props:{node:l[11],enableClick:l[0],currentTime:l[1],showProgressNodes:l[3],beatTimes:l[4]}}),t.$on("nodeClicked",l[8]),{c(){oe(t.$$.fragment)},l(s){re(t.$$.fragment,s)},m(s,n){ce(t,s,n),e=!0},p(s,n){const r={};n&4&&(r.node=s[11]),n&1&&(r.enableClick=s[0]),n&2&&(r.currentTime=s[1]),n&8&&(r.showProgressNodes=s[3]),n&16&&(r.beatTimes=s[4]),t.$set(r)},i(s){e||(D(t.$$.fragment,s),e=!0)},o(s){B(t.$$.fragment,s),e=!1},d(s){ue(t,s)}}}function bt(l){let t,e,s,n,r,o,a,i=l[6]&&Ue(l),d=l[4],v=[];for(let c=0;c<d.length;c+=1)v[c]=Me(Oe(l,d,c));let h=l[2].children.length>0&&ze(l);return{c(){t=k("div"),e=k("a"),i&&i.c(),s=y();for(let c=0;c<v.length;c+=1)v[c].c();n=y(),h&&h.c(),this.h()},l(c){t=T(c,"DIV",{class:!0,style:!0});var u=w(t);e=T(u,"A",{class:!0});var g=w(e);i&&i.l(g),s=I(g);for(let N=0;N<v.length;N+=1)v[N].l(g);g.forEach(_),n=I(u),h&&h.l(u),u.forEach(_),this.h()},h(){p(e,"class","bar outlined svelte-g9xqg2"),ie(e,"button",l[0]),ie(e,"active",l[6]),p(t,"class","node svelte-g9xqg2"),W(t,"--node-duration",l[2].end_time-l[2].start_time)},m(c,u){q(c,t,u),m(t,e),i&&i.m(e,null),m(e,s);for(let g=0;g<v.length;g+=1)v[g]&&v[g].m(e,null);m(t,n),h&&h.m(t,null),r=!0,o||(a=ae(e,"click",l[7]),o=!0)},p(c,[u]){if(c[6]?i?i.p(c,u):(i=Ue(c),i.c(),i.m(e,s)):i&&(i.d(1),i=null),u&20){d=c[4];let g;for(g=0;g<d.length;g+=1){const N=Oe(c,d,g);v[g]?v[g].p(N,u):(v[g]=Me(N),v[g].c(),v[g].m(e,null))}for(;g<v.length;g+=1)v[g].d(1);v.length=d.length}(!r||u&1)&&ie(e,"button",c[0]),(!r||u&64)&&ie(e,"active",c[6]),c[2].children.length>0?h?(h.p(c,u),u&4&&D(h,1)):(h=ze(c),h.c(),D(h,1),h.m(t,null)):h&&(Ne(),B(h,1,1,()=>{h=null}),Ce()),(!r||u&4)&&W(t,"--node-duration",c[2].end_time-c[2].start_time)},i(c){r||(D(h),r=!0)},o(c){B(h),r=!1},d(c){c&&_(t),i&&i.d(),Qe(v,c),h&&h.d(),o=!1,a()}}}function kt(l,t,e){let{enableClick:s=!1}=t,{currentTime:n=0}=t,{node:r}=t,{showProgressNodes:o=[]}=t,{beatTimes:a=[]}=t,i=0,d=!1;const v=ot();function h(){s&&v("nodeClicked",r)}function c(u){Ke.call(this,l,u)}return l.$$set=u=>{"enableClick"in u&&e(0,s=u.enableClick),"currentTime"in u&&e(1,n=u.currentTime),"node"in u&&e(2,r=u.node),"showProgressNodes"in u&&e(3,o=u.showProgressNodes),"beatTimes"in u&&e(4,a=u.beatTimes)},l.$$.update=()=>{l.$$.dirty&6&&e(5,i=(n-r.start_time)/(r.end_time-r.start_time)),l.$$.dirty&4&&r.id.split("-").findLast(()=>!0),l.$$.dirty&12&&e(6,d=o.includes(r))},[s,n,r,o,a,i,d,h,c]}class Xe extends we{constructor(t){super(),Ee(this,t,kt,bt,Pe,{enableClick:0,currentTime:1,node:2,showProgressNodes:3,beatTimes:4})}}function Je(l){let t,e=l[1].id+"",s,n,r,o;return r=new vt({props:{$$slots:{default:[Tt]},$$scope:{ctx:l}}}),r.$on("click",l[11]),{c(){t=k("span"),s=G(e),n=y(),oe(r.$$.fragment),this.h()},l(a){t=T(a,"SPAN",{class:!0});var i=w(t);s=J(i,e),i.forEach(_),n=I(a),re(r.$$.fragment,a),this.h()},h(){p(t,"class","practiceLink")},m(a,i){q(a,t,i),m(t,s),q(a,n,i),ce(r,a,i),o=!0},p(a,i){(!o||i&2)&&e!==(e=a[1].id+"")&&We(s,e);const d={};i&4194304&&(d.$$scope={dirty:i,ctx:a}),r.$set(d)},i(a){o||(D(r.$$.fragment,a),o=!0)},o(a){B(r.$$.fragment,a),o=!1},d(a){a&&_(t),a&&_(n),ue(r,a)}}}function Tt(l){let t;return{c(){t=G("Practice")},l(e){t=J(e,"Practice")},m(e,s){q(e,t,s)},d(e){e&&_(t)}}}function wt(l){let t,e;return{c(){t=k("source"),this.h()},l(s){t=T(s,"SOURCE",{src:!0,type:!0}),this.h()},h(){Le(t.src,e=l[3])||p(t,"src",e),p(t,"type","video/mp4")},m(s,n){q(s,t,n)},p(s,n){n&8&&!Le(t.src,e=s[3])&&p(t,"src",e)},d(s){s&&_(t)}}}function Et(l){let t,e,s,n,r,o,a,i,d,v=l[8].title+"",h,c,u,g,N,j,R,X,O,Y,L,H,S,b,U,fe,A,de,Z=l[5].toFixed(1)+"",le,_e,he,$,me,V,pe,ve,ge,be,ke,K,Te,De;document.title=t="Dance | "+l[8].title,R=new Xe({props:{enableClick:!0,node:l[9].root,showProgressNodes:l[6],currentTime:l[0],beatTimes:l[8].beatTimes||[]}}),R.$on("nodeClicked",l[10]);let E=l[1]&&Je(l);function Ye(f){l[15](f)}function Ze(f){l[16](f)}function $e(f){l[17](f)}function xe(f){l[18](f)}function et(f){l[19](f)}let Q={drawSkeleton:!1,$$slots:{default:[wt]},$$scope:{ctx:l}};return l[0]!==void 0&&(Q.currentTime=l[0]),l[5]!==void 0&&(Q.playbackRate=l[5]),l[7]!==void 0&&(Q.duration=l[7]),l[4]!==void 0&&(Q.paused=l[4]),l[2]!==void 0&&(Q.fitToFlexbox=l[2]),V=new ht({props:Q}),x.push(()=>ee(V,"currentTime",Ye)),x.push(()=>ee(V,"playbackRate",Ze)),x.push(()=>ee(V,"duration",$e)),x.push(()=>ee(V,"paused",xe)),x.push(()=>ee(V,"fitToFlexbox",et)),{c(){e=k("meta"),s=y(),n=k("section"),r=k("nav"),o=k("a"),a=G("< Home"),i=y(),d=k("h1"),h=G(v),c=y(),u=k("div"),g=y(),N=k("div"),j=k("div"),oe(R.$$.fragment),X=y(),O=k("div"),E&&E.c(),Y=y(),L=k("div"),H=k("div"),S=k("div"),b=k("label"),U=G("Playback Speed"),fe=y(),A=k("input"),de=y(),le=G(Z),_e=G("x"),he=y(),$=k("div"),me=y(),oe(V.$$.fragment),this.h()},l(f){const P=rt("svelte-1jmxnxe",document.head);e=T(P,"META",{name:!0,content:!0}),P.forEach(_),s=I(f),n=T(f,"SECTION",{class:!0});var F=w(n);r=T(F,"NAV",{});var C=w(r);o=T(C,"A",{class:!0,href:!0});var Se=w(o);a=J(Se,"< Home"),Se.forEach(_),i=I(C),d=T(C,"H1",{class:!0});var Ve=w(d);h=J(Ve,v),Ve.forEach(_),c=I(C),u=T(C,"DIV",{class:!0});var tt=w(u);tt.forEach(_),C.forEach(_),g=I(F),N=T(F,"DIV",{class:!0});var ye=w(N);j=T(ye,"DIV",{class:!0});var Ie=w(j);re(R.$$.fragment,Ie),Ie.forEach(_),ye.forEach(_),X=I(F),O=T(F,"DIV",{class:!0});var Ae=w(O);E&&E.l(Ae),Ae.forEach(_),Y=I(F),L=T(F,"DIV",{class:!0});var se=w(L);H=T(se,"DIV",{class:!0});var ne=w(H);S=T(ne,"DIV",{class:!0});var z=w(S);b=T(z,"LABEL",{for:!0});var Fe=w(b);U=J(Fe,"Playback Speed"),Fe.forEach(_),fe=I(z),A=T(z,"INPUT",{type:!0,name:!0,min:!0,max:!0,step:!0}),de=I(z),le=J(z,Z),_e=J(z,"x"),z.forEach(_),he=I(ne),$=T(ne,"DIV",{class:!0});var lt=w($);lt.forEach(_),ne.forEach(_),me=I(se),re(V.$$.fragment,se),se.forEach(_),F.forEach(_),this.h()},h(){p(e,"name","description"),p(e,"content","App for learning the dance: "+l[8].title),p(o,"class","button"),p(o,"href","/"),p(d,"class","title"),p(u,"class","svelte-3ce5k"),p(j,"class","svelte-3ce5k"),p(N,"class","visual-tree svelte-3ce5k"),p(O,"class","ta-center svelte-3ce5k"),p(b,"for","playbackSpeed"),p(A,"type","range"),p(A,"name","playbackSpeed"),p(A,"min","0.5"),p(A,"max","2"),p(A,"step","0.1"),p(S,"class","control svelte-3ce5k"),p($,"class","control svelte-3ce5k"),p(H,"class","controls svelte-3ce5k"),p(L,"class","preview svelte-3ce5k"),p(n,"class","svelte-3ce5k")},m(f,P){m(document.head,e),q(f,s,P),q(f,n,P),m(n,r),m(r,o),m(o,a),m(r,i),m(r,d),m(d,h),m(r,c),m(r,u),m(n,g),m(n,N),m(N,j),ce(R,j,null),m(n,X),m(n,O),E&&E.m(O,null),m(n,Y),m(n,L),m(L,H),m(H,S),m(S,b),m(b,U),m(S,fe),m(S,A),Re(A,l[5]),m(S,de),m(S,le),m(S,_e),m(H,he),m(H,$),m(L,me),ce(V,L,null),K=!0,Te||(De=[ae(A,"change",l[14]),ae(A,"input",l[14])],Te=!0)},p(f,[P]){(!K||P&256)&&t!==(t="Dance | "+f[8].title)&&(document.title=t);const F={};P&64&&(F.showProgressNodes=f[6]),P&1&&(F.currentTime=f[0]),R.$set(F),f[1]?E?(E.p(f,P),P&2&&D(E,1)):(E=Je(f),E.c(),D(E,1),E.m(O,null)):E&&(Ne(),B(E,1,1,()=>{E=null}),Ce()),P&32&&Re(A,f[5]),(!K||P&32)&&Z!==(Z=f[5].toFixed(1)+"")&&We(le,Z);const C={};P&4194312&&(C.$$scope={dirty:P,ctx:f}),!pe&&P&1&&(pe=!0,C.currentTime=f[0],te(()=>pe=!1)),!ve&&P&32&&(ve=!0,C.playbackRate=f[5],te(()=>ve=!1)),!ge&&P&128&&(ge=!0,C.duration=f[7],te(()=>ge=!1)),!be&&P&16&&(be=!0,C.paused=f[4],te(()=>be=!1)),!ke&&P&4&&(ke=!0,C.fitToFlexbox=f[2],te(()=>ke=!1)),V.$set(C)},i(f){K||(D(R.$$.fragment,f),D(E),D(V.$$.fragment,f),K=!0)},o(f){B(R.$$.fragment,f),B(E),B(V.$$.fragment,f),K=!1},d(f){_(e),f&&_(s),f&&_(n),ue(R),E&&E.d(),ue(V),Te=!1,ct(De)}}}function Pt(l,t,e){let s;ut(l,dt,b=>e(20,s=b));let{data:n}=t;const r=n.dance,o=n.danceTree;let a=!0,i="",d=!0,v=1/0,h=0,c=1,u=null,g=[],N;async function j(b){console.log("node clicked",b.detail);const U=b.detail;e(4,d=!0),e(13,v=U.end_time),e(1,u=U),await Be(),e(0,h=U.start_time),await Be(),e(4,d=!1)}async function R(){try{if(!u)throw new Error("No node selected");const U=((s==null?void 0:s.path)??"")+"practicenode/"+u.id;await gt(U)}catch(b){console.error("Error navigating to practice page",b)}}function X(){c=ft(this.value),e(5,c)}function O(b){h=b,e(0,h)}function Y(b){c=b,e(5,c)}function L(b){N=b,e(7,N)}function H(b){d=b,e(4,d),e(0,h),e(13,v)}function S(b){a=b,e(2,a)}return l.$$set=b=>{"data"in b&&e(12,n=b.data)},l.$$.update=()=>{l.$$.dirty&2&&e(6,g=u!==null?[u]:[]),l.$$.dirty&8193&&h>v&&e(4,d=!0)},e(3,i=_t(r)),[h,u,a,i,d,c,g,N,r,o,j,R,n,v,X,O,Y,L,H,S]}class It extends we{constructor(t){super(),Ee(this,t,Pt,Et,Pe,{data:12})}}export{It as default};
