import{e as Fe}from"../chunks/index.04079824.js";import{g as st,b as it}from"../chunks/dances-store.d832a528.js";import{S as ue,i as fe,s as de,C as at,k as T,l as w,m as P,h as d,n as b,b as q,D as p,N as oe,E as ot,F as rt,G as ct,g as D,d as R,L as We,a as y,c as I,M as ae,p as Q,v as Ee,f as Ne,H as Xe,K as ut,q as j,r as z,u as re,e as ce,J as Ye,y as ee,z as te,A as ne,B as le,w as Z,P as $,O as ft,Q as Re,R as x,T as dt,t as Oe,U as _t,V as Be,I as ht}from"../chunks/index.eec1637c.js";import{V as mt,g as pt}from"../chunks/VideoWithSkeleton.bb12692d.js";import{p as bt}from"../chunks/stores.9bfc51b0.js";/* empty css                                                           */import{d as gt}from"../chunks/debugMode.e0161a01.js";function vt(l){let t,e,n,s,r;const i=l[1].default,a=at(i,l,l[0],null);return{c(){t=T("button"),e=T("span"),a&&a.c(),this.h()},l(o){t=w(o,"BUTTON",{class:!0});var u=P(t);e=w(u,"SPAN",{class:!0});var _=P(e);a&&a.l(_),_.forEach(d),u.forEach(d),this.h()},h(){b(e,"class","svelte-1syvu4"),b(t,"class","svelte-1syvu4")},m(o,u){q(o,t,u),p(t,e),a&&a.m(e,null),n=!0,s||(r=oe(t,"click",l[2]),s=!0)},p(o,[u]){a&&a.p&&(!n||u&1)&&ot(a,i,o,o[0],n?ct(i,o[0],u,null):rt(o[0]),null)},i(o){n||(D(a,o),n=!0)},o(o){R(a,o),n=!1},d(o){o&&d(t),a&&a.d(o),s=!1,r()}}}function kt(l,t,e){let{$$slots:n={},$$scope:s}=t;function r(i){We.call(this,l,i)}return l.$$set=i=>{"$$scope"in i&&e(0,s=i.$$scope)},[s,n,r]}class Tt extends ue{constructor(t){super(),fe(this,t,kt,vt,de,{})}}function wt({params:l}){const t=l.danceTreeId,[e,n]=st(t);if(!e)throw Fe(404,"Dance Not found");if(!n)throw Fe(404,"Dance Tree Not found");return{dance:e,danceTree:n}}const Pt=!1,Et="always",Ut=Object.freeze(Object.defineProperty({__proto__:null,load:wt,prerender:Pt,trailingSlash:Et},Symbol.toStringTag,{value:"Module"}));function Le(l,t,e){const n=l.slice();return n[12]=t[e],n}function Me(l,t,e){const n=l.slice();return n[15]=t[e],n}function He(l){let t,e=l[2].complexity.toFixed(2)+"",n;return{c(){t=T("span"),n=j(e),this.h()},l(s){t=w(s,"SPAN",{class:!0});var r=P(t);n=z(r,e),r.forEach(d),this.h()},h(){b(t,"class","complexity svelte-pqm28r")},m(s,r){q(s,t,r),p(t,n)},p(s,r){r&4&&e!==(e=s[2].complexity.toFixed(2)+"")&&re(n,e)},d(s){s&&d(t)}}}function Ue(l){let t;return{c(){t=T("span"),this.h()},l(e){t=w(e,"SPAN",{class:!0,style:!0});var n=P(t);n.forEach(d),this.h()},h(){b(t,"class","progress outlined svelte-pqm28r"),Q(t,"width",l[5]*100+"%")},m(e,n){q(e,t,n)},p(e,n){n&32&&Q(t,"width",e[5]*100+"%")},d(e){e&&d(t)}}}function je(l){let t,e=l[4],n=[];for(let s=0;s<e.length;s+=1)n[s]=Ge(Me(l,e,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=ce()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);t=ce()},m(s,r){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,r);q(s,t,r)},p(s,r){if(r&20){e=s[4];let i;for(i=0;i<e.length;i+=1){const a=Me(s,e,i);n[i]?n[i].p(a,r):(n[i]=Ge(a),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=e.length}},d(s){Ye(n,s),s&&d(t)}}}function ze(l){let t;return{c(){t=T("span"),this.h()},l(e){t=w(e,"SPAN",{class:!0,style:!0});var n=P(t);n.forEach(d),this.h()},h(){b(t,"class","beat-line svelte-pqm28r"),Q(t,"left",(l[15]-l[2].start_time)/(l[2].end_time-l[2].start_time)*100+"%")},m(e,n){q(e,t,n)},p(e,n){n&20&&Q(t,"left",(e[15]-e[2].start_time)/(e[2].end_time-e[2].start_time)*100+"%")},d(e){e&&d(t)}}}function Ge(l){let t,e=l[15]>l[2].start_time&&l[15]<l[2].end_time&&ze(l);return{c(){e&&e.c(),t=ce()},l(n){e&&e.l(n),t=ce()},m(n,s){e&&e.m(n,s),q(n,t,s)},p(n,s){n[15]>n[2].start_time&&n[15]<n[2].end_time?e?e.p(n,s):(e=ze(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(n){e&&e.d(n),n&&d(t)}}}function Je(l){let t,e,n=l[2].children,s=[];for(let i=0;i<n.length;i+=1)s[i]=Ke(Le(l,n,i));const r=i=>R(s[i],1,1,()=>{s[i]=null});return{c(){t=T("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){t=w(i,"DIV",{class:!0});var a=P(t);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(d),this.h()},h(){b(t,"class","children svelte-pqm28r")},m(i,a){q(i,t,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null);e=!0},p(i,a){if(a&31){n=i[2].children;let o;for(o=0;o<n.length;o+=1){const u=Le(i,n,o);s[o]?(s[o].p(u,a),D(s[o],1)):(s[o]=Ke(u),s[o].c(),D(s[o],1),s[o].m(t,null))}for(Ee(),o=n.length;o<s.length;o+=1)r(o);Ne()}},i(i){if(!e){for(let a=0;a<n.length;a+=1)D(s[a]);e=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);e=!1},d(i){i&&d(t),Ye(s,i)}}}function Ke(l){let t,e;return t=new Ze({props:{node:l[12],enableClick:l[0],currentTime:l[1],showProgressNodes:l[3],beatTimes:l[4]}}),t.$on("nodeClicked",l[9]),{c(){ee(t.$$.fragment)},l(n){te(t.$$.fragment,n)},m(n,s){ne(t,n,s),e=!0},p(n,s){const r={};s&4&&(r.node=n[12]),s&1&&(r.enableClick=n[0]),s&2&&(r.currentTime=n[1]),s&8&&(r.showProgressNodes=n[3]),s&16&&(r.beatTimes=n[4]),t.$set(r)},i(n){e||(D(t.$$.fragment,n),e=!0)},o(n){R(t.$$.fragment,n),e=!1},d(n){le(t,n)}}}function Nt(l){let t,e,n,s,r,i,a,o,u=l[7]&&He(l),_=l[6]&&Ue(l),g=l[7]&&je(l),h=l[2].children.length>0&&Je(l);return{c(){t=T("div"),e=T("a"),u&&u.c(),n=y(),_&&_.c(),s=y(),g&&g.c(),r=y(),h&&h.c(),this.h()},l(m){t=w(m,"DIV",{class:!0,style:!0});var f=P(t);e=w(f,"A",{class:!0});var A=P(e);u&&u.l(A),n=I(A),_&&_.l(A),s=I(A),g&&g.l(A),A.forEach(d),r=I(f),h&&h.l(f),f.forEach(d),this.h()},h(){b(e,"class","bar outlined svelte-pqm28r"),ae(e,"button",l[0]),ae(e,"active",l[6]),b(t,"class","node svelte-pqm28r"),Q(t,"--node-duration",l[2].end_time-l[2].start_time)},m(m,f){q(m,t,f),p(t,e),u&&u.m(e,null),p(e,n),_&&_.m(e,null),p(e,s),g&&g.m(e,null),p(t,r),h&&h.m(t,null),i=!0,a||(o=oe(e,"click",l[8]),a=!0)},p(m,[f]){m[7]?u?u.p(m,f):(u=He(m),u.c(),u.m(e,n)):u&&(u.d(1),u=null),m[6]?_?_.p(m,f):(_=Ue(m),_.c(),_.m(e,s)):_&&(_.d(1),_=null),m[7]?g?g.p(m,f):(g=je(m),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!i||f&1)&&ae(e,"button",m[0]),(!i||f&64)&&ae(e,"active",m[6]),m[2].children.length>0?h?(h.p(m,f),f&4&&D(h,1)):(h=Je(m),h.c(),D(h,1),h.m(t,null)):h&&(Ee(),R(h,1,1,()=>{h=null}),Ne()),(!i||f&4)&&Q(t,"--node-duration",m[2].end_time-m[2].start_time)},i(m){i||(D(h),i=!0)},o(m){R(h),i=!1},d(m){m&&d(t),u&&u.d(),_&&_.d(),g&&g.d(),h&&h.d(),a=!1,o()}}}function Dt(l,t,e){let n;Xe(l,gt,f=>e(7,n=f));let{enableClick:s=!1}=t,{currentTime:r=0}=t,{node:i}=t,{showProgressNodes:a=[]}=t,{beatTimes:o=[]}=t,u=0,_=!1;const g=ut();function h(){s&&g("nodeClicked",i)}function m(f){We.call(this,l,f)}return l.$$set=f=>{"enableClick"in f&&e(0,s=f.enableClick),"currentTime"in f&&e(1,r=f.currentTime),"node"in f&&e(2,i=f.node),"showProgressNodes"in f&&e(3,a=f.showProgressNodes),"beatTimes"in f&&e(4,o=f.beatTimes)},l.$$.update=()=>{l.$$.dirty&6&&e(5,u=(r-i.start_time)/(i.end_time-i.start_time)),l.$$.dirty&4&&i.id.split("-").findLast(()=>!0),l.$$.dirty&12&&e(6,_=a.includes(i))},[s,r,i,a,o,u,_,n,h,m]}class Ze extends ue{constructor(t){super(),fe(this,t,Dt,Nt,de,{enableClick:0,currentTime:1,node:2,showProgressNodes:3,beatTimes:4})}}function Qe(l){let t,e=l[3].id+"",n,s,r,i;return r=new Tt({props:{$$slots:{default:[St]},$$scope:{ctx:l}}}),r.$on("click",l[11]),{c(){t=T("span"),n=j(e),s=y(),ee(r.$$.fragment),this.h()},l(a){t=w(a,"SPAN",{class:!0});var o=P(t);n=z(o,e),o.forEach(d),s=I(a),te(r.$$.fragment,a),this.h()},h(){b(t,"class","practiceLink")},m(a,o){q(a,t,o),p(t,n),q(a,s,o),ne(r,a,o),i=!0},p(a,o){(!i||o&8)&&e!==(e=a[3].id+"")&&re(n,e);const u={};o&2097152&&(u.$$scope={dirty:o,ctx:a}),r.$set(u)},i(a){i||(D(r.$$.fragment,a),i=!0)},o(a){R(r.$$.fragment,a),i=!1},d(a){a&&d(t),a&&d(s),le(r,a)}}}function St(l){let t;return{c(){t=j("Practice")},l(e){t=z(e,"Practice")},m(e,n){q(e,t,n)},d(e){e&&d(t)}}}function Ct(l){let t,e;return{c(){t=T("source"),this.h()},l(n){t=w(n,"SOURCE",{src:!0,type:!0}),this.h()},h(){Be(t.src,e=l[5])||b(t,"src",e),b(t,"type","video/mp4")},m(n,s){q(n,t,s)},p(n,s){s&32&&!Be(t.src,e=n[5])&&b(t,"src",e)},d(n){n&&d(t)}}}function qt(l){let t,e,n,s,r,i,a,o,u,_,g=l[0].title+"",h,m,f,A,M,H,O,W,L,X,B,v,N,J,_e,he,F,me,Y=l[7].toFixed(1)+"",se,pe,be,V,ge,ve,ke,Te,we,U,Pe,De;document.title=t="Dance | "+l[0].title,O=new Ze({props:{enableClick:!0,node:l[1].root,showProgressNodes:l[8],currentTime:l[2],beatTimes:l[0].beatTimes||[]}}),O.$on("nodeClicked",l[10]);let E=l[3]&&Qe(l);function $e(c){l[14](c)}function xe(c){l[15](c)}function et(c){l[16](c)}function tt(c){l[17](c)}function nt(c){l[18](c)}let K={drawSkeleton:!1,$$slots:{default:[Ct]},$$scope:{ctx:l}};return l[2]!==void 0&&(K.currentTime=l[2]),l[7]!==void 0&&(K.playbackRate=l[7]),l[9]!==void 0&&(K.duration=l[9]),l[6]!==void 0&&(K.paused=l[6]),l[4]!==void 0&&(K.fitToFlexbox=l[4]),V=new mt({props:K}),Z.push(()=>$(V,"currentTime",$e)),Z.push(()=>$(V,"playbackRate",xe)),Z.push(()=>$(V,"duration",et)),Z.push(()=>$(V,"paused",tt)),Z.push(()=>$(V,"fitToFlexbox",nt)),{c(){e=T("meta"),s=y(),r=T("section"),i=T("nav"),a=T("a"),o=j("< Home"),u=y(),_=T("h1"),h=j(g),m=y(),f=T("div"),A=y(),M=T("div"),H=T("div"),ee(O.$$.fragment),W=y(),L=T("div"),E&&E.c(),X=y(),B=T("div"),v=T("div"),N=T("div"),J=T("label"),_e=j("Playback Speed"),he=y(),F=T("input"),me=y(),se=j(Y),pe=j("x"),be=y(),ee(V.$$.fragment),this.h()},l(c){const k=ft("svelte-1jmxnxe",document.head);e=w(k,"META",{name:!0,content:!0}),k.forEach(d),s=I(c),r=w(c,"SECTION",{class:!0});var S=P(r);i=w(S,"NAV",{});var C=P(i);a=w(C,"A",{class:!0,href:!0});var Se=P(a);o=z(Se,"< Home"),Se.forEach(d),u=I(C),_=w(C,"H1",{class:!0});var Ce=P(_);h=z(Ce,g),Ce.forEach(d),m=I(C),f=w(C,"DIV",{class:!0});var lt=P(f);lt.forEach(d),C.forEach(d),A=I(S),M=w(S,"DIV",{class:!0});var qe=P(M);H=w(qe,"DIV",{class:!0});var Ve=P(H);te(O.$$.fragment,Ve),Ve.forEach(d),qe.forEach(d),W=I(S),L=w(S,"DIV",{class:!0});var ye=P(L);E&&E.l(ye),ye.forEach(d),X=I(S),B=w(S,"DIV",{class:!0});var ie=P(B);v=w(ie,"DIV",{class:!0});var Ie=P(v);N=w(Ie,"DIV",{class:!0});var G=P(N);J=w(G,"LABEL",{for:!0});var Ae=P(J);_e=z(Ae,"Playback Speed"),Ae.forEach(d),he=I(G),F=w(G,"INPUT",{type:!0,name:!0,min:!0,max:!0,step:!0}),me=I(G),se=z(G,Y),pe=z(G,"x"),G.forEach(d),Ie.forEach(d),be=I(ie),te(V.$$.fragment,ie),ie.forEach(d),S.forEach(d),this.h()},h(){b(e,"name","description"),b(e,"content",n="App for learning the dance: "+l[0].title),b(a,"class","button"),b(a,"href","/"),b(_,"class","title"),b(f,"class","svelte-bhlu6q"),b(H,"class","svelte-bhlu6q"),b(M,"class","visual-tree svelte-bhlu6q"),b(L,"class","ta-center svelte-bhlu6q"),b(J,"for","playbackSpeed"),b(F,"type","range"),b(F,"name","playbackSpeed"),b(F,"min","0.5"),b(F,"max","2"),b(F,"step","0.1"),b(N,"class","control svelte-bhlu6q"),b(v,"class","controls svelte-bhlu6q"),b(B,"class","preview svelte-bhlu6q"),b(r,"class","svelte-bhlu6q")},m(c,k){p(document.head,e),q(c,s,k),q(c,r,k),p(r,i),p(i,a),p(a,o),p(i,u),p(i,_),p(_,h),p(i,m),p(i,f),p(r,A),p(r,M),p(M,H),ne(O,H,null),p(r,W),p(r,L),E&&E.m(L,null),p(r,X),p(r,B),p(B,v),p(v,N),p(N,J),p(J,_e),p(N,he),p(N,F),Re(F,l[7]),p(N,me),p(N,se),p(N,pe),p(B,be),ne(V,B,null),U=!0,Pe||(De=[oe(F,"change",l[13]),oe(F,"input",l[13])],Pe=!0)},p(c,[k]){(!U||k&1)&&t!==(t="Dance | "+c[0].title)&&(document.title=t),(!U||k&1&&n!==(n="App for learning the dance: "+c[0].title))&&b(e,"content",n),(!U||k&1)&&g!==(g=c[0].title+"")&&re(h,g);const S={};k&2&&(S.node=c[1].root),k&256&&(S.showProgressNodes=c[8]),k&4&&(S.currentTime=c[2]),k&1&&(S.beatTimes=c[0].beatTimes||[]),O.$set(S),c[3]?E?(E.p(c,k),k&8&&D(E,1)):(E=Qe(c),E.c(),D(E,1),E.m(L,null)):E&&(Ee(),R(E,1,1,()=>{E=null}),Ne()),k&128&&Re(F,c[7]),(!U||k&128)&&Y!==(Y=c[7].toFixed(1)+"")&&re(se,Y);const C={};k&2097184&&(C.$$scope={dirty:k,ctx:c}),!ge&&k&4&&(ge=!0,C.currentTime=c[2],x(()=>ge=!1)),!ve&&k&128&&(ve=!0,C.playbackRate=c[7],x(()=>ve=!1)),!ke&&k&512&&(ke=!0,C.duration=c[9],x(()=>ke=!1)),!Te&&k&64&&(Te=!0,C.paused=c[6],x(()=>Te=!1)),!we&&k&16&&(we=!0,C.fitToFlexbox=c[4],x(()=>we=!1)),V.$set(C)},i(c){U||(D(O.$$.fragment,c),D(E),D(V.$$.fragment,c),U=!0)},o(c){R(O.$$.fragment,c),R(E),R(V.$$.fragment,c),U=!1},d(c){d(e),c&&d(s),c&&d(r),le(O),E&&E.d(),le(V),Pe=!1,dt(De)}}}function Vt(l,t,e){let n;Xe(l,bt,v=>e(19,n=v));let{dance:s}=t,{danceTree:r}=t,i=!0,a="",o=!0,u=1/0,_=0,g=1,h=null,m=[],f;async function A(v){console.log("node clicked",v.detail);const N=v.detail;e(6,o=!0),e(12,u=N.end_time),e(3,h=N),await Oe(),e(2,_=N.start_time),await Oe(),e(6,o=!1)}async function M(){try{if(!h)throw new Error("No node selected");const N=((n==null?void 0:n.path)??"")+"practicenode/"+h.id;await pt(N)}catch(v){console.error("Error navigating to practice page",v)}}function H(){g=_t(this.value),e(7,g)}function O(v){_=v,e(2,_)}function W(v){g=v,e(7,g)}function L(v){f=v,e(9,f)}function X(v){o=v,e(6,o),e(2,_),e(12,u)}function B(v){i=v,e(4,i)}return l.$$set=v=>{"dance"in v&&e(0,s=v.dance),"danceTree"in v&&e(1,r=v.danceTree)},l.$$.update=()=>{l.$$.dirty&1&&e(5,a=it(s)),l.$$.dirty&8&&e(8,m=h!==null?[h]:[]),l.$$.dirty&4100&&_>u&&e(6,o=!0)},[s,r,_,h,i,a,o,g,m,f,A,M,u,H,O,W,L,X,B]}class yt extends ue{constructor(t){super(),fe(this,t,Vt,qt,de,{dance:0,danceTree:1})}}function It(l){let t,e;return t=new yt({props:{dance:l[0],danceTree:l[1]}}),{c(){ee(t.$$.fragment)},l(n){te(t.$$.fragment,n)},m(n,s){ne(t,n,s),e=!0},p:ht,i(n){e||(D(t.$$.fragment,n),e=!0)},o(n){R(t.$$.fragment,n),e=!1},d(n){le(t,n)}}}function At(l,t,e){let{data:n}=t;const s=n.dance,r=n.danceTree;return l.$$set=i=>{"data"in i&&e(2,n=i.data)},[s,r,n]}class jt extends ue{constructor(t){super(),fe(this,t,At,It,de,{data:2})}}export{jt as component,Ut as universal};
