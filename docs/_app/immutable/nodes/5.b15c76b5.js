var It=Object.defineProperty;var Ct=(r,e,t)=>e in r?It(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ne=(r,e,t)=>(Ct(r,typeof e!="symbol"?e+"":e,t),t);import{D as He,P as Ft,e as Qe}from"../chunks/index.04079824.js";import{g as Vt,f as Mt,b as At,l as Ot,m as Xe}from"../chunks/dances-store.d832a528.js";import{S as pe,i as ve,s as be,k as D,l as T,m as E,h,n as b,b as V,I as ue,W as Je,q as B,r as H,D as k,a as U,c as j,X as xe,Y as Se,N as le,J as Ce,T as qe,u as re,v as wt,d as ne,f as yt,g as te,H as St,K as Ye,o as We,t as Rt,w as ce,y as me,z as he,A as _e,B as ge,M as Ee,Z as Et,_ as Dt,P as De,p as $e,R as Te,V as et}from"../chunks/index.eec1637c.js";import{a as Lt,V as zt,g as Nt}from"../chunks/VideoWithSkeleton.bb12692d.js";import{P as Ue,a as K,G as tt,M as Bt}from"../chunks/mediapipe-utils.57782937.js";import{w as Fe,a as rt,R as Pe,P as Be}from"../chunks/VirtualMirror.svelte_svelte_type_style_lang.b5e30c3b.js";function nt(r,e,t){const n=r.slice();return n[11]=e[t],n}function it(r,e,t){const n=r.slice();return n[11]=e[t],n}function Ht(r){let e,t;return{c(){e=D("div"),t=B("Webcam Started")},l(n){e=T(n,"DIV",{});var i=E(e);t=H(i,"Webcam Started"),i.forEach(h)},m(n,i){V(n,e,i),k(e,t)},p:ue,d(n){n&&h(e)}}}function Wt(r){let e,t,n,i,s,o,l,c,f,d,_,g,I,R,S,p,N,M,F=r[3],w=[];for(let a=0;a<F.length;a+=1)w[a]=ot(it(r,F,a));let C=r[4],L=[];for(let a=0;a<C.length;a+=1)L[a]=st(nt(r,C,a));return{c(){e=D("label"),t=B("Video Devices"),n=U(),i=D("select");for(let a=0;a<w.length;a+=1)w[a].c();s=U(),o=D("div"),l=U(),c=D("label"),f=B("Audio Devices"),d=U(),_=D("select");for(let a=0;a<L.length;a+=1)L[a].c();g=U(),I=D("div"),R=U(),S=D("button"),p=B("Start Webcam"),this.h()},l(a){e=T(a,"LABEL",{for:!0});var m=E(e);t=H(m,"Video Devices"),m.forEach(h),n=j(a),i=T(a,"SELECT",{name:!0,class:!0});var u=E(i);for(let W=0;W<w.length;W+=1)w[W].l(u);u.forEach(h),s=j(a),o=T(a,"DIV",{class:!0}),E(o).forEach(h),l=j(a),c=T(a,"LABEL",{for:!0});var A=E(c);f=H(A,"Audio Devices"),A.forEach(h),d=j(a),_=T(a,"SELECT",{name:!0,class:!0});var z=E(_);for(let W=0;W<L.length;W+=1)L[W].l(z);z.forEach(h),g=j(a),I=T(a,"DIV",{class:!0}),E(I).forEach(h),R=j(a),S=T(a,"BUTTON",{class:!0});var Z=E(S);p=H(Z,"Start Webcam"),Z.forEach(h),this.h()},h(){b(e,"for","videoDevices"),b(i,"name","videoDevices"),b(i,"class","outlined thin"),r[6]===void 0&&xe(()=>r[9].call(i)),b(o,"class","spacer svelte-1n7z142"),b(c,"for","audioDevices"),b(_,"name","audioDevices"),b(_,"class","outlined thin"),r[5]===void 0&&xe(()=>r[10].call(_)),b(I,"class","spacer svelte-1n7z142"),b(S,"class","button outlined thin")},m(a,m){V(a,e,m),k(e,t),V(a,n,m),V(a,i,m);for(let u=0;u<w.length;u+=1)w[u]&&w[u].m(i,null);Se(i,r[6],!0),V(a,s,m),V(a,o,m),V(a,l,m),V(a,c,m),k(c,f),V(a,d,m),V(a,_,m);for(let u=0;u<L.length;u+=1)L[u]&&L[u].m(_,null);Se(_,r[5],!0),V(a,g,m),V(a,I,m),V(a,R,m),V(a,S,m),k(S,p),N||(M=[le(i,"change",r[9]),le(_,"change",r[10]),le(S,"click",r[8])],N=!0)},p(a,m){if(m&8){F=a[3];let u;for(u=0;u<F.length;u+=1){const A=it(a,F,u);w[u]?w[u].p(A,m):(w[u]=ot(A),w[u].c(),w[u].m(i,null))}for(;u<w.length;u+=1)w[u].d(1);w.length=F.length}if(m&72&&Se(i,a[6]),m&16){C=a[4];let u;for(u=0;u<C.length;u+=1){const A=nt(a,C,u);L[u]?L[u].p(A,m):(L[u]=st(A),L[u].c(),L[u].m(_,null))}for(;u<L.length;u+=1)L[u].d(1);L.length=C.length}m&48&&Se(_,a[5])},d(a){a&&h(e),a&&h(n),a&&h(i),Ce(w,a),a&&h(s),a&&h(o),a&&h(l),a&&h(c),a&&h(d),a&&h(_),Ce(L,a),a&&h(g),a&&h(I),a&&h(R),a&&h(S),N=!1,qe(M)}}}function Ut(r){let e,t,n,i,s;return{c(){e=D("div"),t=D("div"),n=U(),i=D("p"),s=B(r[1]),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=E(e);t=T(l,"DIV",{class:!0}),E(t).forEach(h),n=j(l),i=T(l,"P",{});var c=E(i);s=H(c,r[1]),c.forEach(h),l.forEach(h),this.h()},h(){b(t,"class","spinner large margin-auto"),b(e,"class","ta-center")},m(o,l){V(o,e,l),k(e,t),k(e,n),k(e,i),k(i,s)},p(o,l){l&2&&re(s,o[1])},d(o){o&&h(e)}}}function jt(r){let e,t,n,i,s,o,l=r[2]&&lt(r);return{c(){e=D("div"),t=D("button"),n=B("Start Webcam"),i=U(),l&&l.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var f=E(e);t=T(f,"BUTTON",{id:!0,class:!0});var d=E(t);n=H(d,"Start Webcam"),d.forEach(h),i=j(f),l&&l.l(f),f.forEach(h),this.h()},h(){b(t,"id","startWebcam"),b(t,"class","button outlined thin"),b(e,"class","ta-center")},m(c,f){V(c,e,f),k(e,t),k(t,n),k(e,i),l&&l.m(e,null),s||(o=le(t,"click",r[7]),s=!0)},p(c,f){c[2]?l?l.p(c,f):(l=lt(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(c){c&&h(e),l&&l.d(),s=!1,o()}}}function ot(r){let e,t=r[11].label+"",n,i;return{c(){e=D("option"),n=B(t),this.h()},l(s){e=T(s,"OPTION",{});var o=E(e);n=H(o,t),o.forEach(h),this.h()},h(){e.__value=i=r[11].deviceId,e.value=e.__value},m(s,o){V(s,e,o),k(e,n)},p(s,o){o&8&&t!==(t=s[11].label+"")&&re(n,t),o&8&&i!==(i=s[11].deviceId)&&(e.__value=i,e.value=e.__value)},d(s){s&&h(e)}}}function st(r){let e,t=r[11].label+"",n,i;return{c(){e=D("option"),n=B(t),this.h()},l(s){e=T(s,"OPTION",{});var o=E(e);n=H(o,t),o.forEach(h),this.h()},h(){e.__value=i=r[11].deviceId,e.value=e.__value},m(s,o){V(s,e,o),k(e,n)},p(s,o){o&16&&t!==(t=s[11].label+"")&&re(n,t),o&16&&i!==(i=s[11].deviceId)&&(e.__value=i,e.value=e.__value)},d(s){s&&h(e)}}}function lt(r){var l;let e,t,n,i,s=((l=r[2])==null?void 0:l.message)+"",o;return{c(){e=D("div"),t=D("p"),n=B("Failed to start webcam: "),i=D("code"),o=B(s),this.h()},l(c){e=T(c,"DIV",{class:!0});var f=E(e);t=T(f,"P",{class:!0});var d=E(t);n=H(d,"Failed to start webcam: "),i=T(d,"CODE",{});var _=E(i);o=H(_,s),_.forEach(h),d.forEach(h),f.forEach(h),this.h()},h(){b(t,"class","svelte-1n7z142"),b(e,"class","error svelte-1n7z142")},m(c,f){V(c,e,f),k(e,t),k(t,n),k(t,i),k(i,o)},p(c,f){var d;f&4&&s!==(s=((d=c[2])==null?void 0:d.message)+"")&&re(o,s)},d(c){c&&h(e)}}}function qt(r){let e;function t(s,o){if(s[0]==="start")return jt;if(s[0]==="busy")return Ut;if(s[0]==="devicelist")return Wt;if(s[0]==="success")return Ht}let n=t(r),i=n&&n(r);return{c(){e=D("div"),i&&i.c(),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=E(e);i&&i.l(o),o.forEach(h),this.h()},h(){b(e,"class","webcamSelector svelte-1n7z142")},m(s,o){V(s,e,o),i&&i.m(e,null)},p(s,[o]){n===(n=t(s))&&i?i.p(s,o):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(e,null)))},i:ue,o:ue,d(s){s&&h(e),i&&i.d()}}}function Yt(r,e,t){let n="start",i="",s,o=[],l=[],c,f;async function d(){t(0,n="busy"),t(2,s=void 0),t(1,i="Detecting Devices...");try{const R=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),S=await navigator.mediaDevices.enumerateDevices();if(t(3,o=S.filter(p=>p.kind==="videoinput")),t(4,l=S.filter(p=>p.kind==="audioinput")),o.length===0){t(0,n="start"),t(2,s=new Error("No devices found"));return}if(o.length===1){Fe.set(R),t(0,n="success");return}t(6,f=o[0].deviceId),t(5,c=l[0].deviceId),t(0,n="devicelist")}catch(R){t(2,s=R),t(0,n="start");return}}async function _(){t(2,s=void 0),t(0,n="busy"),t(1,i="Starting Webcam...");try{const R=await navigator.mediaDevices.getUserMedia({video:{deviceId:f},audio:{deviceId:c}});Fe.set(R),t(0,n="success")}catch(R){t(2,s=R),t(0,n="devicelist")}}function g(){f=Je(this),t(6,f),t(3,o)}function I(){c=Je(this),t(5,c),t(4,l)}return[n,i,s,o,l,c,f,d,_,g,I]}class Gt extends pe{constructor(e){super(),ve(this,e,Yt,qt,be,{})}}function Kt(r){let e,t,n;return t=new Gt({}),{c(){e=D("div"),me(t.$$.fragment)},l(i){e=T(i,"DIV",{});var s=E(e);he(t.$$.fragment,s),s.forEach(h)},m(i,s){V(i,e,s),_e(t,e,null),n=!0},p:ue,i(i){n||(te(t.$$.fragment,i),n=!0)},o(i){ne(t.$$.fragment,i),n=!1},d(i){i&&h(e),ge(t)}}}function Zt(r){let e,t,n,i,s;return{c(){e=D("video"),t=U(),n=D("canvas"),this.h()},l(o){e=T(o,"VIDEO",{class:!0}),E(e).forEach(h),t=j(o),n=T(o,"CANVAS",{class:!0}),E(n).forEach(h),this.h()},h(){e.autoplay=!0,b(e,"class","svelte-1b7esxu"),Ee(e,"flippedHorizontal",r[1]),b(n,"class","svelte-1b7esxu"),Ee(n,"flippedHorizontal",r[1])},m(o,l){V(o,e,l),r[23](e),e.muted=r[0],V(o,t,l),V(o,n,l),r[25](n),i||(s=[le(e,"play",r[7]),le(e,"loadeddata",r[6]),le(e,"volumechange",r[24])],i=!0)},p(o,l){l[0]&1&&(e.muted=o[0]),l[0]&2&&Ee(e,"flippedHorizontal",o[1]),l[0]&2&&Ee(n,"flippedHorizontal",o[1])},i:ue,o:ue,d(o){o&&h(e),r[23](null),o&&h(t),o&&h(n),r[25](null),i=!1,qe(s)}}}function Qt(r){let e,t,n,i;const s=[Zt,Kt],o=[];function l(c,f){return c[4]?0:1}return t=l(r),n=o[t]=s[t](r),{c(){e=D("div"),n.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var f=E(e);n.l(f),f.forEach(h),this.h()},h(){b(e,"class","wrapper svelte-1b7esxu")},m(c,f){V(c,e,f),o[t].m(e,null),r[26](e),i=!0},p(c,f){let d=t;t=l(c),t===d?o[t].p(c,f):(wt(),ne(o[d],1,1,()=>{o[d]=null}),yt(),n=o[t],n?n.p(c,f):(n=o[t]=s[t](c),n.c()),te(n,1),n.m(e,null))},i(c){i||(te(n),i=!0)},o(c){ne(n),i=!1},d(c){c&&h(e),o[t].d(),r[26](null)}}}const Xt=50;function Jt(r,e,t){let n;St(r,Fe,v=>t(4,n=v));const i=-1e3,s=Ye();let{poseEstimationEnabled:o=!1}=e,{drawSkeleton:l=!1}=e,{muted:c=!0}=e,{poseEstimationCheckFunction:f=()=>!0}=e,d=null,{customDrawFn:_=null}=e,g,{poseEstimationPrimedPromise:I=new Promise(v=>g=v)}=e,R=!1,S,p,N,M,F,w;const C=new Promise(v=>w=v);let{mirrorHorizontally:L=!0}=e,a=new Date().getTime(),m=-1,u=new Date().getTime(),A=-1,z=null,Z=1,W=1,Q=1,P=1,O=1,G=1;function X(){S&&(t(19,Z=S.videoWidth),t(20,W=S.videoHeight))}const J=()=>{p&&(G>Q?(t(3,p.height=O,p),t(3,p.width=O*Q,p)):(t(3,p.width=P,p),t(3,p.height=P/Q,p)))};function x(){return t(16,d=rt),t(16,d.onmessage=v=>{if(v.data.type===Pe.poseEstimation){if(u=new Date().getTime(),v.data.frameId===i){g==null||g();return}A=v.data.frameId,z=v.data.estimatedPose;const de={frameId:v.data.frameId,estimatedPose:v.data.estimatedPose,srcWidth:v.data.srcWidth,srcHeight:v.data.srcHeight};s("poseEstimationResult",de)}else v.data.type===Pe.error||v.data.type===Pe.resetError?(console.error("PoseEstim Error Message",v.data.type,v.data.error),v.data.frameId===m&&(m=-1,z=null)):v.data.type==Pe.resetComplete&&(console.log("Pose Estimation Reset Complete"),m=-1,z=null)},d),rt.postMessage({type:Be.reset,frameId:new Date().getTime()}),d.ready}async function ie(){if(!o||!d||!M||!p)throw new Error("Pose estimation not enabled, or not yet ready.");return console.log("Priming pose estimation"),t(8,I=new Promise(v=>g=v)),d.postMessage({type:Be.requestPoseEstimation,frameId:i,image:M.getImageData(0,0,p.width,p.height)}),I}We(async()=>{o&&x(),await Rt(),J();const v=new ResizeObserver(de=>{if(!N)return;const[se,y]=Lt(N);t(21,P=se),t(22,O=y)});return v.observe(N),()=>{d==null||d.terminate(),v.unobserve(N)}});function $(){!S||!n||(t(2,S.srcObject=n,S),t(17,R=!0),w&&(w(),w=void 0))}let q=0;function oe(){if(!p||!S||!n||!M)return;q+=1;const v=S.videoWidth/S.videoHeight,de=p.width/p.height;let se=p.width,y=p.height,ee=0,fe=0;if(v>de?(y=p.width/v,fe=(p.height-y)/2):(se=y*v,ee=(p.width-se)/2),M.drawImage(S,ee,fe,se,y),!(ee>=0&&fe>=0&&se>0&&y>0&&de>0&&v>0)){requestAnimationFrame(oe);return}const ke=new Date().getTime(),we=ke-u;if(o&&A==m&&we>Xt&&f()){const ae=ke-a;m=q,s("poseEstimationFrameSent",{frameId:q,timestampMs:ae}),d==null||d.postMessage({type:Be.requestPoseEstimation,frameId:q,timestampMs:ae,image:M.getImageData(ee,fe,se,y)})}if(_==null||_(M,z),!l){requestAnimationFrame(oe);return}M.save(),z&&z.length===Ue.length&&(F==null||F.drawConnectors(z,Ft.POSE_CONNECTIONS),F==null||F.drawLandmarks(z,{radius:ae=>He.lerp(ae.from.z,-.15,.1,5,1)})),M.restore(),requestAnimationFrame(oe)}We(()=>($(),{}));function Me(v){ce[v?"unshift":"push"](()=>{S=v,t(2,S)})}function Ae(){c=this.muted,t(0,c)}function Oe(v){ce[v?"unshift":"push"](()=>{p=v,t(3,p)})}function Re(v){ce[v?"unshift":"push"](()=>{N=v,t(5,N)})}return r.$$set=v=>{"poseEstimationEnabled"in v&&t(9,o=v.poseEstimationEnabled),"drawSkeleton"in v&&t(10,l=v.drawSkeleton),"muted"in v&&t(0,c=v.muted),"poseEstimationCheckFunction"in v&&t(11,f=v.poseEstimationCheckFunction),"customDrawFn"in v&&t(12,_=v.customDrawFn),"poseEstimationPrimedPromise"in v&&t(8,I=v.poseEstimationPrimedPromise),"mirrorHorizontally"in v&&t(1,L=v.mirrorHorizontally)},r.$$.update=()=>{r.$$.dirty[0]&1572864&&(Q=Z/W),r.$$.dirty[0]&6291456&&(G=P/O),r.$$.dirty[0]&66048&&o&&!d&&x(),r.$$.dirty[0]&20&&n&&S&&$(),r.$$.dirty[0]&7864320&&Z&&W&&P&&O&&J(),r.$$.dirty[0]&393228&&R&&S&&p&&(t(18,M=p.getContext("2d",{willReadFrequently:!0})),F=new He(M),oe())},[c,L,S,p,n,N,X,J,I,o,l,f,_,C,x,ie,d,R,M,Z,W,P,O,Me,Ae,Oe,Re]}class xt extends pe{constructor(e){super(),ve(this,e,Jt,Qt,be,{poseEstimationEnabled:9,drawSkeleton:10,muted:0,poseEstimationCheckFunction:11,customDrawFn:12,poseEstimationPrimedPromise:8,webcamStartedPromise:13,mirrorHorizontally:1,setupPoseEstimation:14,primePoseEstimation:15},null,[-1,-1])}get webcamStartedPromise(){return this.$$.ctx[13]}get setupPoseEstimation(){return this.$$.ctx[14]}get primePoseEstimation(){return this.$$.ctx[15]}}function $t({params:r}){const e=r.danceTreeId,[t,n]=Vt(e);if(!t)throw Qe(404,"Dance Not found");if(!n)throw Qe(404,"Dance Tree Not found");const i=Mt(n,r.practiceNodeId);return{dance:t,danceTree:n,danceTreeNode:i}}const er=!1,qr=Object.freeze(Object.defineProperty({__proto__:null,load:$t,prerender:er},Symbol.toStringTag,{value:"Module"}));function tr(r,e,t,n){return{startTime:t.start_time,endTime:t.end_time,activityTypes:["drill"],playbackSpeed:.5}}let Ie;const rr=new Uint8Array(16);function nr(){if(!Ie&&(Ie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(rr)}const Y=[];for(let r=0;r<256;++r)Y.push((r+256).toString(16).slice(1));function ir(r,e=0){return(Y[r[e+0]]+Y[r[e+1]]+Y[r[e+2]]+Y[r[e+3]]+"-"+Y[r[e+4]]+Y[r[e+5]]+"-"+Y[r[e+6]]+Y[r[e+7]]+"-"+Y[r[e+8]]+Y[r[e+9]]+"-"+Y[r[e+10]]+Y[r[e+11]]+Y[r[e+12]]+Y[r[e+13]]+Y[r[e+14]]+Y[r[e+15]]).toLowerCase()}const or=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),at={randomUUID:or};function ct(r,e,t){if(at.randomUUID&&!e&&!r)return at.randomUUID();r=r||{};const n=r.random||(r.rng||nr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return ir(n)}const ut=Object.freeze(["Nice Job!","Great Moves!","You're Killing It!","Awesome Dancing!","Keep It Up!","Incredible Rhythm!","Impressive Dancing!","Amazing Performance!","You've Got the Groove!","You're a Dancing Machine!","Phenomenal Footwork!","You're a Star!","Excellent Execution!","You're on Fire!","Superb Dancing!","You're a Pro!","Outstanding Performance!"]);function sr(){return ut[Math.floor(Math.random()*ut.length)]}const dt=Object.freeze(["Don't Give Up!","Keep Pushing!","You've Got This!","Stay Strong!","Keep Going!","Believe In Yourself!","Stay Focused!","Never Give Up!","You Can Do It!","Stay Motivated!","Keep Moving Forward!","Stay Resilient!","Stay Positive!","Stay Determined!","Stay Committed!","Stay Persistent!","Stay Confident!","Stay Inspired!","Stay Driven!","Stay Tenacious!"]);function lr(){return dt[Math.floor(Math.random()*dt.length)]}const Ve=Object.freeze([[K.leftShoulder,K.rightShoulder],[K.leftShoulder,K.leftHip],[K.leftHip,K.rightHip],[K.rightHip,K.rightShoulder],[K.leftShoulder,K.leftElbow],[K.leftElbow,K.leftWrist],[K.rightShoulder,K.rightElbow],[K.rightElbow,K.rightWrist]]),ar=new Map([[0,"torso"],[1,"torso"],[2,"torso"],[3,"torso"],[4,"leftarm"],[5,"leftarm"],[6,"rightarm"],[7,"rightarm"]]),Tt=Ve.map((r,e)=>{const[t,n]=r,[i,s]=[Ue[t],Ue[n]];return`${i} -> ${s}`}),cr=new Map(Tt.map((r,e)=>[r,e]));function ur(r,e,t,n,i){const s=t-e,o=i-n;return n+o*((r-e)/s)}function Pt(r){return Math.pow(Math.pow(r[0],2)+Math.pow(r[1],2),.5)}function dr(r){return r.reduce((e,t)=>e+t,0)}function je(r){return dr(r)/r.length}function ft(r,e,t){const{x:n,y:i}=r[e],{x:s,y:o}=r[t],[l,c]=[s-n,o-i],f=Pt([l,c]);return[l/f,c/f]}function fr(r,e){return 0}function mr(r,e){let t=0;const n=Ve.map(_=>{const[g,I]=_,[R,S]=ft(r,g,I),[p,N]=ft(e,g,I),[M,F]=[R-p,S-N];return Pt([M,F])||0});t=je(n);const i=2,s=0,o=5,l=0;function c(_){return ur(_,s,i,o,l)}const f=c(t),d=n.map(c);return[f,d]}class hr{constructor(){Ne(this,"tracks",new Map)}recordEvaluationFrame(e,t,n,i){var c;const s=Object.keys(i);this.tracks.has(e)||this.tracks.set(e,{creationDate:new Date,frameTimes:[],recordTimesMs:[],userPoses:[],evaluation:s.reduce((f,d)=>(f[d]=[],f),{})});const o=((c=this.tracks.get(e))==null?void 0:c.frameTimes.slice(-1)[0])??-1/0;if(t<o)throw new Error("Frame time must be increasing");const l=this.tracks.get(e);l.frameTimes.push(t),l.recordTimesMs.push(new Date().getTime()),l.userPoses.push(n);for(const f of s)l.evaluation[f].push(i[f])}}class _r{constructor(e){Ne(this,"recorder",new hr);this.referenceData=e}evaluateFrame(e,t,n){const i=this.referenceData.getReferencePoseAtTime(t);if(!i)return null;const[s,o]=mr(i,n),l=fr(),c={qijiaOverallScore:s,qijiaByVectorScores:o,julienScore:l};return this.recorder.recordEvaluationFrame(e,t,n,c),c}getPerformanceSummary(e){const t=this.recorder.tracks.get(e);if(!t)return null;const n=Ve.map((_,g)=>{const I=Tt[g],R=t.evaluation.qijiaByVectorScores.map(p=>p[g]),S=je(R);return[I,S]}),i=je(t.evaluation.qijiaOverallScore),s=new Map(n),o=t.frameTimes.length,l=(t.recordTimesMs[o-1]-t.recordTimesMs[0])/1e3,c=t.frameTimes[o-1]-t.frameTimes[0],f=o/c,d=o/l;return{frameCount:o,danceTimeDurationSecs:c,realtimeDurationSecs:l,danceTimeFps:f,realTimeFps:d,qijiaOverallScore:i,qijiaByVectorScores:s}}generateTerminalFeedback(e){if(!e)return{headline:"Try Again?",subHeadline:"We don't have any feedback for you.",suggestedAction:"repeat"};const{qijiaOverallScore:t,qijiaByVectorScores:n}=e;let i,s,o,l;const[c,f]=[...n.keys()].map(d=>{const _=cr.get(d);if(_===void 0)throw new Error("Unexpected vector name: "+d);const g=n.get(d);if(g===void 0)throw new Error("Unable to retrieve score for "+d);return[_,g]}).reduce(([d,_],[g,I])=>I<_?[g,I]:[d,_],[-1,1/0]);if(t>4)i=sr(),s="You did great on that trial! Would you like to move on now?",o="next";else{i=lr(),s="Want to try again?",o="repeat";const d=ar.get(c);if(!d)throw new Error("Unexpected vector index: "+c);l=[d]}return{headline:i,subHeadline:s,score:t,suggestedAction:o,incorrectBodyParts:l}}}const gr=4.5,pr=3.5,vr=Ve.map(([r,e])=>({start:r,end:e}));function br(r,e){const t=e==null?void 0:e.qijiaByVectorScores[r.index??-1];return t===void 0?"white":t>=gr?"green":t>=pr?"yellow":"red"}function kr(r,e,t){if(!e)return;new He(r).drawConnectors(e,vr,{color:i=>br(i,t),lineWidth:4})}const wr=""+new URL("../assets/metronome.208d4270.mp3",import.meta.url).href;function mt(r,e,t){const n=r.slice();return n[9]=e[t],n[11]=t,n}function ht(r){let e,t,n;return{c(){e=Et("path"),this.h()},l(i){e=Dt(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),E(e).forEach(h),this.h()},h(){b(e,"d",r[2][r[9]]),b(e,"fill",t=r[0][r[11]]),b(e,"stroke",n=r[1][r[11]]),b(e,"stroke-width","0.5")},m(i,s){V(i,e,s)},p(i,s){s&1&&t!==(t=i[0][i[11]])&&b(e,"fill",t),s&2&&n!==(n=i[1][i[11]])&&b(e,"stroke",n)},d(i){i&&h(e)}}}function yr(r){let e,t=r[3],n=[];for(let i=0;i<t.length;i+=1)n[i]=ht(mt(r,t,i));return{c(){e=Et("svg");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=Dt(i,"svg",{xmlns:!0,viewBox:!0,preserveAspectRatio:!0,class:!0});var s=E(e);for(let o=0;o<n.length;o+=1)n[o].l(s);s.forEach(h),this.h()},h(){b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 -1 14 55"),b(e,"preserveAspectRatio","xMinYMin slice"),b(e,"class","svelte-62mrp4")},m(i,s){V(i,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,[s]){if(s&15){t=i[3];let o;for(o=0;o<t.length;o+=1){const l=mt(i,t,o);n[o]?n[o].p(l,s):(n[o]=ht(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:ue,o:ue,d(i){i&&h(e),Ce(n,i)}}}function Sr(r,e,t){let{highlightBodyParts:n=[]}=e,{stdFillColor:i="#000"}=e,{stdOutlineColor:s="#AAA"}=e,{highlightFillColor:o="#000"}=e,{highlightOutlineColor:l="#77F"}=e;const c={head:"M 7 0 C 9.5 0 10 2 10 4 S 8.5 8 7 8 S 4 6 4 4 S 4.5 0 7 0 Z",torso:"M 7 10 C 10 10 12 10 12 11 S 10.5 18 10.5 21 S 11 26 11 27 S 9 28 7 28 S 3 28 3 27 S 3.5 24 3.5 21 S 2 12 2 11 S 4 10 7 10 Z",leftleg:"M 8 29 L 8.5 40 L 8.25 50 C 8.25 51 8.35 52 8.5 53.5 C 9.5 53.5 10.75 53.5 10.5 53 L 9.5 51 L 10.5 41 L 10.5 40 L 11 29 C 11 28.25 8 28.25 8 29 Z",rightleg:"M 6 29 L 5.5 40 L 5.75 50 C 5.75 51 5.65 52 5.5 53.5 C 4.5 53.5 3.25 53.5 3.5 53 L 4.5 51 L 3.5 41 L 3.5 40 L 3 29 C 3 28.25 6 28.25 6 29 Z",leftarm:"M 12.25 11 C 12.75 11.5 12.75 12 13 13 C 13.5 16 13.75 18 13.75 20 S 13 25 13 26 S 13.2 27 13.2 28 S 12 29 12 28.5 S 11.75 27 12 26 C 12.25 25 12 22 12.5 20 C 12.1 14 11.5 15 12.2 11 Z",rightarm:"M 1.75 11 C 1.25 11.5 1.25 12 1 13 C 0.5 16 0.25 18 0.25 20 S 1 25 1 26 S 0.8 27 0.8 28 S 2 29 2 28.5 S 2.25 27 2 26 C 1.75 25 2 22 1.5 20 C 1.9 14 2.5 15 1.8 11 Z"},f=Object.keys(c);let d=Array(f.length).fill(i),_=Array(f.length).fill(s);return r.$$set=g=>{"highlightBodyParts"in g&&t(4,n=g.highlightBodyParts),"stdFillColor"in g&&t(5,i=g.stdFillColor),"stdOutlineColor"in g&&t(6,s=g.stdOutlineColor),"highlightFillColor"in g&&t(7,o=g.highlightFillColor),"highlightOutlineColor"in g&&t(8,l=g.highlightOutlineColor)},r.$$.update=()=>{r.$$.dirty&176&&t(0,d=f.map(g=>n.includes(g)?o:i)),r.$$.dirty&336&&t(1,_=f.map(g=>n.includes(g)?l:s))},[d,_,c,f,n,i,s,o,l]}class Er extends pe{constructor(e){super(),ve(this,e,Sr,yr,be,{highlightBodyParts:4,stdFillColor:5,stdOutlineColor:6,highlightFillColor:7,highlightOutlineColor:8})}}function _t(r,e,t){const n=r.slice();return n[7]=e[t],n}function gt(r){let e,t,n,i=r[0].score.toFixed(2)+"",s;return{c(){e=D("p"),t=D("code"),n=B("Score: "),s=B(i),this.h()},l(o){e=T(o,"P",{class:!0});var l=E(e);t=T(l,"CODE",{});var c=E(t);n=H(c,"Score: "),s=H(c,i),c.forEach(h),l.forEach(h),this.h()},h(){b(e,"class","svelte-fz31ud")},m(o,l){V(o,e,l),k(e,t),k(t,n),k(t,s)},p(o,l){l&1&&i!==(i=o[0].score.toFixed(2)+"")&&re(s,i)},d(o){o&&h(e)}}}function pt(r){let e,t,n=r[7]+"",i,s;return{c(){e=D("p"),t=B("Try focusing on your "),i=B(n),s=B(" next time."),this.h()},l(o){e=T(o,"P",{class:!0});var l=E(e);t=H(l,"Try focusing on your "),i=H(l,n),s=H(l," next time."),l.forEach(h),this.h()},h(){b(e,"class","svelte-fz31ud")},m(o,l){V(o,e,l),k(e,t),k(e,i),k(e,s)},p(o,l){l&1&&n!==(n=o[7]+"")&&re(i,n)},d(o){o&&h(e)}}}function Dr(r){var A,z,Z,W,Q;let e,t,n=((A=r[0])==null?void 0:A.headline)+"",i,s,o,l=((z=r[0])==null?void 0:z.subHeadline)+"",c,f,d,_,g,I,R,S,p,N,M,F,w,C,L,a=((Z=r[0])==null?void 0:Z.score)&&gt(r),m=((W=r[0])==null?void 0:W.incorrectBodyParts)??[],u=[];for(let P=0;P<m.length;P+=1)u[P]=pt(_t(r,m,P));return I=new Er({props:{highlightBodyParts:((Q=r[0])==null?void 0:Q.incorrectBodyParts)??[]}}),{c(){e=D("div"),t=D("h2"),i=B(n),s=U(),o=D("p"),c=B(l),f=U(),a&&a.c(),d=U();for(let P=0;P<u.length;P+=1)u[P].c();_=U(),g=D("div"),me(I.$$.fragment),R=U(),S=D("button"),p=B(r[1]),N=U(),M=D("button"),F=B(r[2]),this.h()},l(P){e=T(P,"DIV",{class:!0});var O=E(e);t=T(O,"H2",{class:!0});var G=E(t);i=H(G,n),G.forEach(h),s=j(O),o=T(O,"P",{class:!0});var X=E(o);c=H(X,l),X.forEach(h),f=j(O),a&&a.l(O),d=j(O);for(let $=0;$<u.length;$+=1)u[$].l(O);_=j(O),g=T(O,"DIV",{class:!0});var J=E(g);he(I.$$.fragment,J),J.forEach(h),R=j(O),S=T(O,"BUTTON",{class:!0});var x=E(S);p=H(x,r[1]),x.forEach(h),N=j(O),M=T(O,"BUTTON",{class:!0});var ie=E(M);F=H(ie,r[2]),ie.forEach(h),O.forEach(h),this.h()},h(){b(t,"class","svelte-fz31ud"),b(o,"class","sub-headline svelte-fz31ud"),b(g,"class","skeleton svelte-fz31ud"),b(S,"class","outlined"),b(M,"class","outlined thin"),b(e,"class","feedbackForm svelte-fz31ud")},m(P,O){V(P,e,O),k(e,t),k(t,i),k(e,s),k(e,o),k(o,c),k(e,f),a&&a.m(e,null),k(e,d);for(let G=0;G<u.length;G+=1)u[G]&&u[G].m(e,null);k(e,_),k(e,g),_e(I,g,null),k(e,R),k(e,S),k(S,p),k(e,N),k(e,M),k(M,F),w=!0,C||(L=[le(S,"click",r[3]),le(M,"click",r[4])],C=!0)},p(P,[O]){var X,J,x,ie,$;if((!w||O&1)&&n!==(n=((X=P[0])==null?void 0:X.headline)+"")&&re(i,n),(!w||O&1)&&l!==(l=((J=P[0])==null?void 0:J.subHeadline)+"")&&re(c,l),(x=P[0])!=null&&x.score?a?a.p(P,O):(a=gt(P),a.c(),a.m(e,d)):a&&(a.d(1),a=null),O&1){m=((ie=P[0])==null?void 0:ie.incorrectBodyParts)??[];let q;for(q=0;q<m.length;q+=1){const oe=_t(P,m,q);u[q]?u[q].p(oe,O):(u[q]=pt(oe),u[q].c(),u[q].m(e,_))}for(;q<u.length;q+=1)u[q].d(1);u.length=m.length}const G={};O&1&&(G.highlightBodyParts=(($=P[0])==null?void 0:$.incorrectBodyParts)??[]),I.$set(G),(!w||O&2)&&re(p,P[1]),(!w||O&4)&&re(F,P[2])},i(P){w||(te(I.$$.fragment,P),w=!0)},o(P){ne(I.$$.fragment,P),w=!1},d(P){P&&h(e),a&&a.d(),Ce(u,P),ge(I),C=!1,qe(L)}}}function Tr(r,e,t){const n=Ye();let{feedback:i=null}=e,s=!1,o="",l="";function c(){n(s?"repeat-clicked":"continue-clicked")}function f(){n(s?"continue-clicked":"repeat-clicked")}return r.$$set=d=>{"feedback"in d&&t(0,i=d.feedback)},r.$$.update=()=>{r.$$.dirty&1&&t(5,s=(i==null?void 0:i.suggestedAction)==="repeat"),r.$$.dirty&32&&t(1,o=s?"Do Again ðŸ”":"Continue âž¡ï¸"),r.$$.dirty&32&&t(2,l=s?"Continue âž¡ï¸":"Do Again ðŸ”")},[i,o,l,c,f,s]}class Pr extends pe{constructor(e){super(),ve(this,e,Tr,Dr,be,{feedback:0})}}function Ir(r){let e,t;return{c(){e=D("source"),this.h()},l(n){e=T(n,"SOURCE",{src:!0,type:!0}),this.h()},h(){et(e.src,t=r[8])||b(e,"src",t),b(e,"type","video/mp4")},m(n,i){V(n,e,i)},p(n,i){i[0]&256&&!et(e.src,t=n[8])&&b(e,"src",t)},d(n){n&&h(e)}}}function vt(r){let e,t,n;return{c(){e=D("div"),t=D("span"),n=B(r[13]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=E(e);t=T(s,"SPAN",{class:!0});var o=E(t);n=H(o,r[13]),o.forEach(h),s.forEach(h),this.h()},h(){b(t,"class","count svelte-3894ek"),b(e,"class","countdown svelte-3894ek")},m(i,s){V(i,e,s),k(e,t),k(t,n)},p(i,s){s[0]&8192&&re(n,i[13])},d(i){i&&h(e)}}}function bt(r){let e,t,n;return t=new Pr({props:{feedback:r[12]}}),t.$on("repeat-clicked",r[1]),t.$on("continue-clicked",r[33]),{c(){e=D("div"),me(t.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=E(e);he(t.$$.fragment,s),s.forEach(h),this.h()},h(){b(e,"class","svelte-3894ek")},m(i,s){V(i,e,s),_e(t,e,null),n=!0},p(i,s){const o={};s[0]&4096&&(o.feedback=i[12]),t.$set(o)},i(i){n||(te(t.$$.fragment,i),n=!0)},o(i){ne(t.$$.fragment,i),n=!1},d(i){i&&h(e),ge(t)}}}function kt(r){let e,t,n;return{c(){e=D("div"),t=D("div"),n=B("Loading..."),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=E(e);t=T(s,"DIV",{class:!0});var o=E(t);n=H(o,"Loading..."),o.forEach(h),s.forEach(h),this.h()},h(){b(t,"class","label svelte-3894ek"),b(e,"class","loading outlined thick svelte-3894ek")},m(i,s){V(i,e,s),k(e,t),k(t,n)},d(i){i&&h(e)}}}function Cr(r){let e,t,n,i,s,o,l,c,f,d,_,g,I,R;function S(m){r[29](m)}function p(m){r[30](m)}function N(m){r[31](m)}function M(m){r[32](m)}let F={flipHorizontal:r[0],fitToFlexbox:Fr,poseData:r[10],drawSkeleton:!1,$$slots:{default:[Ir]},$$scope:{ctx:r}};r[3]!==void 0&&(F.currentTime=r[3]),r[7]!==void 0&&(F.playbackRate=r[7]),r[5]!==void 0&&(F.paused=r[5]),r[4]!==void 0&&(F.duration=r[4]),n=new zt({props:F}),ce.push(()=>De(n,"currentTime",S)),ce.push(()=>De(n,"playbackRate",p)),ce.push(()=>De(n,"paused",N)),ce.push(()=>De(n,"duration",M));let w=r[13]>=0&&vt(r),C=r[2]==="feedback"&&bt(r),L={poseEstimationEnabled:r[9],drawSkeleton:!1,poseEstimationCheckFunction:r[16],customDrawFn:r[34]};g=new xt({props:L}),r[35](g),g.$on("poseEstimationFrameSent",r[15]),g.$on("poseEstimationResult",r[17]);let a=r[2]==="waitStart"&&kt();return{c(){e=D("section"),t=D("div"),me(n.$$.fragment),c=U(),w&&w.c(),f=U(),C&&C.c(),d=U(),_=D("div"),me(g.$$.fragment),I=U(),a&&a.c(),this.h()},l(m){e=T(m,"SECTION",{class:!0});var u=E(e);t=T(u,"DIV",{class:!0});var A=E(t);he(n.$$.fragment,A),c=j(A),w&&w.l(A),A.forEach(h),f=j(u),C&&C.l(u),d=j(u),_=T(u,"DIV",{class:!0});var z=E(_);he(g.$$.fragment,z),I=j(z),a&&a.l(z),z.forEach(h),u.forEach(h),this.h()},h(){b(t,"class","svelte-3894ek"),b(_,"class","svelte-3894ek"),$e(_,"display",r[2]==="feedback"?"none":"flex"),b(e,"class","practicePage svelte-3894ek")},m(m,u){V(m,e,u),k(e,t),_e(n,t,null),k(t,c),w&&w.m(t,null),k(e,f),C&&C.m(e,null),k(e,d),k(e,_),_e(g,_,null),k(_,I),a&&a.m(_,null),R=!0},p(m,u){const A={};u[0]&1&&(A.flipHorizontal=m[0]),u[0]&1024&&(A.poseData=m[10]),u[0]&256|u[1]&16384&&(A.$$scope={dirty:u,ctx:m}),!i&&u[0]&8&&(i=!0,A.currentTime=m[3],Te(()=>i=!1)),!s&&u[0]&128&&(s=!0,A.playbackRate=m[7],Te(()=>s=!1)),!o&&u[0]&32&&(o=!0,A.paused=m[5],Te(()=>o=!1)),!l&&u[0]&16&&(l=!0,A.duration=m[4],Te(()=>l=!1)),n.$set(A),m[13]>=0?w?w.p(m,u):(w=vt(m),w.c(),w.m(t,null)):w&&(w.d(1),w=null),m[2]==="feedback"?C?(C.p(m,u),u[0]&4&&te(C,1)):(C=bt(m),C.c(),te(C,1),C.m(e,d)):C&&(wt(),ne(C,1,1,()=>{C=null}),yt());const z={};u[0]&512&&(z.poseEstimationEnabled=m[9]),u[0]&2048&&(z.customDrawFn=m[34]),g.$set(z),m[2]==="waitStart"?a||(a=kt(),a.c(),a.m(_,null)):a&&(a.d(1),a=null),u[0]&4&&$e(_,"display",m[2]==="feedback"?"none":"flex")},i(m){R||(te(n.$$.fragment,m),te(C),te(g.$$.fragment,m),R=!0)},o(m){ne(n.$$.fragment,m),ne(C),ne(g.$$.fragment,m),R=!1},d(m){m&&h(e),ge(n),w&&w.d(),C&&C.d(),r[35](null),ge(g),a&&a.d()}}}let Fr=!0;const Vr=10;async function ye(r){return new Promise(e=>{setTimeout(e,(r??1)*1e3)})}function Mr(r,e,t){let n;St(r,Fe,y=>t(28,n=y));let{mirrorForEvaluation:i=!0}=e,{dance:s}=e,{practiceActivity:o}=e,{pageActive:l=!1}=e,{flipVideo:c=!1}=e;const f=Ye();let d="waitWebcam",_=0,g="watch",I=1,R=new Audio(wr),S,p=0,N=1,M=0,F=!0,w="",C=!1,L=null,a=null,m=null,u=null,A=ct(),z=null,Z=null,W=-1,Q=!1;function P(){R.currentTime=0,R.play()}async function O(){Q||(t(5,F=!0),t(3,p=(o==null?void 0:o.startTime)??0),t(25,A=ct()),C&&(console.log("Triggering pose estimation priming"),await S.primePoseEstimation()),t(2,d="countdown"),t(27,Q=!0),await ye(I),t(13,W=5),P(),await ye(I),t(13,W=6),P(),await ye(I),t(13,W=7),P(),await ye(I),t(13,W=8),P(),await ye(I),t(2,d="playing"),t(13,W=-1),t(5,F=!1),t(27,Q=!1))}async function G(){t(22,_=0),t(2,d="waitWebcam"),t(11,m=null),t(5,F=!0),t(3,p=(o==null?void 0:o.startTime)??0),t(10,a=await Ot(s)),await S.webcamStartedPromise,t(2,d="waitStart"),t(24,u=new _r(a)),await L,O()}let X=new Map,J=-1,x=new Date;const ie=1e3/Vr;function $(y){X.set(y.detail.frameId,p),J=p}function q(){return!(J===p&&x.getTime()>Date.now()-ie)}function oe(y){var Ge,Ke,Ze;if(d!=="playing")return;if(!a){console.log("No dance pose information",y);return}const ee=y.detail.frameId;if(!X.has(ee)){console.log(`No matching correspondance for ${ee}`,y,"current correspondances: ",X);return}const fe=X.get(ee);X.delete(ee);const Le=(Ge=y==null?void 0:y.detail)==null?void 0:Ge.srcWidth,ke=(Ke=y==null?void 0:y.detail)==null?void 0:Ke.srcHeight,we=((Ze=y==null?void 0:y.detail)==null?void 0:Ze.estimatedPose)??null;if(!we)return;let ae=tt(we,Le,ke);if(i){const ze=Bt(we);ae=tt(ze,Le,ke)}if(ae)try{t(11,m=(u==null?void 0:u.evaluateFrame(A,fe,ae))??null)}catch(ze){t(11,m=null),console.warn("Error evaluating frame",ze)}}We(()=>(t(3,p=(o==null?void 0:o.startTime)??0),L=S.setupPoseEstimation(),G(),{}));function Me(y){p=y,t(3,p)}function Ae(y){N=y,t(7,N),t(20,o)}function Oe(y){F=y,t(5,F),t(20,o),t(3,p),t(4,M),t(24,u),t(25,A),t(26,z)}function Re(y){M=y,t(4,M)}const v=()=>f("continue-clicked"),de=(y,ee)=>kr(y,ee,m);function se(y){ce[y?"unshift":"push"](()=>{S=y,t(6,S)})}return r.$$set=y=>{"mirrorForEvaluation"in y&&t(18,i=y.mirrorForEvaluation),"dance"in y&&t(19,s=y.dance),"practiceActivity"in y&&t(20,o=y.practiceActivity),"pageActive"in y&&t(21,l=y.pageActive),"flipVideo"in y&&t(0,c=y.flipVideo)},r.$$.update=()=>{r.$$.dirty[0]&118489112&&(o!=null&&o.endTime&&p>=o.endTime||M>0&&p>=M)&&(t(5,F=!0),t(26,z=(u==null?void 0:u.getPerformanceSummary(A))??null),t(12,Z=(u==null?void 0:u.generateTerminalFeedback(z))??null),t(2,d="feedback")),r.$$.dirty[0]&268435460&&n&&d==="waitWebcam"&&t(2,d="waitStart"),r.$$.dirty[0]&4&&console.log("PracticePage state",d),r.$$.dirty[0]&5242880&&o&&t(23,g=o.activityTypes[_]),r.$$.dirty[0]&524288&&(I=s!=null&&s.bpm?60/s.bpm:1),r.$$.dirty[0]&16&&console.log("VideoDuration",M),r.$$.dirty[0]&524288&&t(8,w=At(s)),r.$$.dirty[0]&144703520&&t(9,C=l&&(Q||!F)&&g==="drill"),r.$$.dirty[0]&1048576&&t(7,N=(o==null?void 0:o.playbackSpeed)??1)},[c,G,d,p,M,F,S,N,w,C,a,m,Z,W,f,$,q,oe,i,s,o,l,_,g,u,A,z,Q,n,Me,Ae,Oe,Re,v,de,se]}class Ar extends pe{constructor(e){super(),ve(this,e,Mr,Cr,be,{mirrorForEvaluation:18,dance:19,practiceActivity:20,pageActive:21,flipVideo:0,reset:1},null,[-1,-1])}get reset(){return this.$$.ctx[1]}}function Or(r){let e,t,n,i,s,o=r[2].tree_name+"",l,c;return t=new Ar({props:{dance:r[1],practiceActivity:r[3],pageActive:!0}}),t.$on("continue-clicked",r[5]),{c(){e=D("section"),me(t.$$.fragment),n=U(),i=D("a"),s=B("< "),l=B(o),this.h()},l(f){e=T(f,"SECTION",{class:!0});var d=E(e);he(t.$$.fragment,d),n=j(d),i=T(d,"A",{href:!0,class:!0});var _=E(i);s=H(_,"< "),l=H(_,o),_.forEach(h),d.forEach(h),this.h()},h(){b(i,"href",r[0]),b(i,"class","button outlined back svelte-4dzpk3"),b(e,"class","practiceNode svelte-4dzpk3")},m(f,d){V(f,e,d),_e(t,e,null),k(e,n),k(e,i),k(i,s),k(i,l),c=!0},p(f,[d]){(!c||d&1)&&b(i,"href",f[0])},i(f){c||(te(t.$$.fragment,f),c=!0)},o(f){ne(t.$$.fragment,f),c=!1},d(f){f&&h(e),ge(t)}}}function Rr(r,e,t){let{data:n}=e;const i=n.dance,s=n.danceTree,o=n.danceTreeNode,l=tr(i,s,o);let c="/teachlesson/"+Xe(s);const f=()=>Nt(c);return r.$$set=d=>{"data"in d&&t(4,n=d.data)},t(0,c="/teachlesson/"+Xe(s)),[c,i,s,l,n,f]}class Yr extends pe{constructor(e){super(),ve(this,e,Rr,Or,be,{data:4})}}export{Yr as component,qr as universal};
