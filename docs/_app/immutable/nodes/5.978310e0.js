var It=Object.defineProperty;var Ct=(r,e,t)=>e in r?It(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Be=(r,e,t)=>(Ct(r,typeof e!="symbol"?e+"":e,t),t);import{D as ze,P as Ft,e as Qe}from"../chunks/index.04079824.js";import{g as Vt,f as Mt,b as At,l as Ot,m as Xe}from"../chunks/dances-store.c21e2354.js";import{S as pe,i as ve,s as be,k as D,l as P,m as E,h,n as k,b as V,I as ue,W as Je,q as B,r as H,D as b,a as j,c as U,X as xe,Y as Se,N as le,J as Ce,T as qe,u as x,v as wt,d as ie,f as yt,g as re,H as St,K as Ye,o as We,t as Rt,w as ce,y as me,z as he,A as _e,B as ge,M as Ee,Z as Et,_ as Dt,P as De,p as $e,R as Pe,V as et}from"../chunks/index.eec1637c.js";import{a as Lt,V as Nt,g as Bt}from"../chunks/VideoWithSkeleton.7ea73b33.js";import{P as je,a as K,G as tt,M as Ht}from"../chunks/mediapipe-utils.57782937.js";import{w as Fe,a as rt,R as Te,P as He}from"../chunks/VirtualMirror.svelte_svelte_type_style_lang.b5e30c3b.js";function it(r,e,t){const i=r.slice();return i[11]=e[t],i}function ot(r,e,t){const i=r.slice();return i[11]=e[t],i}function zt(r){let e,t;return{c(){e=D("div"),t=B("Webcam Started")},l(i){e=P(i,"DIV",{});var o=E(e);t=H(o,"Webcam Started"),o.forEach(h)},m(i,o){V(i,e,o),b(e,t)},p:ue,d(i){i&&h(e)}}}function Wt(r){let e,t,i,o,s,n,l,c,f,u,_,g,I,R,S,p,z,M,F=r[3],w=[];for(let a=0;a<F.length;a+=1)w[a]=nt(ot(r,F,a));let C=r[4],L=[];for(let a=0;a<C.length;a+=1)L[a]=st(it(r,C,a));return{c(){e=D("label"),t=B("Video Devices"),i=j(),o=D("select");for(let a=0;a<w.length;a+=1)w[a].c();s=j(),n=D("div"),l=j(),c=D("label"),f=B("Audio Devices"),u=j(),_=D("select");for(let a=0;a<L.length;a+=1)L[a].c();g=j(),I=D("div"),R=j(),S=D("button"),p=B("Start Webcam"),this.h()},l(a){e=P(a,"LABEL",{for:!0});var m=E(e);t=H(m,"Video Devices"),m.forEach(h),i=U(a),o=P(a,"SELECT",{name:!0,class:!0});var d=E(o);for(let W=0;W<w.length;W+=1)w[W].l(d);d.forEach(h),s=U(a),n=P(a,"DIV",{class:!0}),E(n).forEach(h),l=U(a),c=P(a,"LABEL",{for:!0});var A=E(c);f=H(A,"Audio Devices"),A.forEach(h),u=U(a),_=P(a,"SELECT",{name:!0,class:!0});var N=E(_);for(let W=0;W<L.length;W+=1)L[W].l(N);N.forEach(h),g=U(a),I=P(a,"DIV",{class:!0}),E(I).forEach(h),R=U(a),S=P(a,"BUTTON",{class:!0});var Z=E(S);p=H(Z,"Start Webcam"),Z.forEach(h),this.h()},h(){k(e,"for","videoDevices"),k(o,"name","videoDevices"),k(o,"class","outlined thin"),r[6]===void 0&&xe(()=>r[9].call(o)),k(n,"class","spacer svelte-1n7z142"),k(c,"for","audioDevices"),k(_,"name","audioDevices"),k(_,"class","outlined thin"),r[5]===void 0&&xe(()=>r[10].call(_)),k(I,"class","spacer svelte-1n7z142"),k(S,"class","button outlined thin")},m(a,m){V(a,e,m),b(e,t),V(a,i,m),V(a,o,m);for(let d=0;d<w.length;d+=1)w[d]&&w[d].m(o,null);Se(o,r[6],!0),V(a,s,m),V(a,n,m),V(a,l,m),V(a,c,m),b(c,f),V(a,u,m),V(a,_,m);for(let d=0;d<L.length;d+=1)L[d]&&L[d].m(_,null);Se(_,r[5],!0),V(a,g,m),V(a,I,m),V(a,R,m),V(a,S,m),b(S,p),z||(M=[le(o,"change",r[9]),le(_,"change",r[10]),le(S,"click",r[8])],z=!0)},p(a,m){if(m&8){F=a[3];let d;for(d=0;d<F.length;d+=1){const A=ot(a,F,d);w[d]?w[d].p(A,m):(w[d]=nt(A),w[d].c(),w[d].m(o,null))}for(;d<w.length;d+=1)w[d].d(1);w.length=F.length}if(m&72&&Se(o,a[6]),m&16){C=a[4];let d;for(d=0;d<C.length;d+=1){const A=it(a,C,d);L[d]?L[d].p(A,m):(L[d]=st(A),L[d].c(),L[d].m(_,null))}for(;d<L.length;d+=1)L[d].d(1);L.length=C.length}m&48&&Se(_,a[5])},d(a){a&&h(e),a&&h(i),a&&h(o),Ce(w,a),a&&h(s),a&&h(n),a&&h(l),a&&h(c),a&&h(u),a&&h(_),Ce(L,a),a&&h(g),a&&h(I),a&&h(R),a&&h(S),z=!1,qe(M)}}}function jt(r){let e,t,i,o,s;return{c(){e=D("div"),t=D("div"),i=j(),o=D("p"),s=B(r[1]),this.h()},l(n){e=P(n,"DIV",{class:!0});var l=E(e);t=P(l,"DIV",{class:!0}),E(t).forEach(h),i=U(l),o=P(l,"P",{});var c=E(o);s=H(c,r[1]),c.forEach(h),l.forEach(h),this.h()},h(){k(t,"class","spinner large margin-auto"),k(e,"class","ta-center")},m(n,l){V(n,e,l),b(e,t),b(e,i),b(e,o),b(o,s)},p(n,l){l&2&&x(s,n[1])},d(n){n&&h(e)}}}function Ut(r){let e,t,i,o,s,n,l=r[2]&&lt(r);return{c(){e=D("div"),t=D("button"),i=B("Start Webcam"),o=j(),l&&l.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=E(e);t=P(f,"BUTTON",{id:!0,class:!0});var u=E(t);i=H(u,"Start Webcam"),u.forEach(h),o=U(f),l&&l.l(f),f.forEach(h),this.h()},h(){k(t,"id","startWebcam"),k(t,"class","button outlined thin"),k(e,"class","ta-center")},m(c,f){V(c,e,f),b(e,t),b(t,i),b(e,o),l&&l.m(e,null),s||(n=le(t,"click",r[7]),s=!0)},p(c,f){c[2]?l?l.p(c,f):(l=lt(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(c){c&&h(e),l&&l.d(),s=!1,n()}}}function nt(r){let e,t=r[11].label+"",i,o;return{c(){e=D("option"),i=B(t),this.h()},l(s){e=P(s,"OPTION",{});var n=E(e);i=H(n,t),n.forEach(h),this.h()},h(){e.__value=o=r[11].deviceId,e.value=e.__value},m(s,n){V(s,e,n),b(e,i)},p(s,n){n&8&&t!==(t=s[11].label+"")&&x(i,t),n&8&&o!==(o=s[11].deviceId)&&(e.__value=o,e.value=e.__value)},d(s){s&&h(e)}}}function st(r){let e,t=r[11].label+"",i,o;return{c(){e=D("option"),i=B(t),this.h()},l(s){e=P(s,"OPTION",{});var n=E(e);i=H(n,t),n.forEach(h),this.h()},h(){e.__value=o=r[11].deviceId,e.value=e.__value},m(s,n){V(s,e,n),b(e,i)},p(s,n){n&16&&t!==(t=s[11].label+"")&&x(i,t),n&16&&o!==(o=s[11].deviceId)&&(e.__value=o,e.value=e.__value)},d(s){s&&h(e)}}}function lt(r){var l;let e,t,i,o,s=((l=r[2])==null?void 0:l.message)+"",n;return{c(){e=D("div"),t=D("p"),i=B("Failed to start webcam: "),o=D("code"),n=B(s),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=E(e);t=P(f,"P",{class:!0});var u=E(t);i=H(u,"Failed to start webcam: "),o=P(u,"CODE",{});var _=E(o);n=H(_,s),_.forEach(h),u.forEach(h),f.forEach(h),this.h()},h(){k(t,"class","svelte-1n7z142"),k(e,"class","error svelte-1n7z142")},m(c,f){V(c,e,f),b(e,t),b(t,i),b(t,o),b(o,n)},p(c,f){var u;f&4&&s!==(s=((u=c[2])==null?void 0:u.message)+"")&&x(n,s)},d(c){c&&h(e)}}}function qt(r){let e;function t(s,n){if(s[0]==="start")return Ut;if(s[0]==="busy")return jt;if(s[0]==="devicelist")return Wt;if(s[0]==="success")return zt}let i=t(r),o=i&&i(r);return{c(){e=D("div"),o&&o.c(),this.h()},l(s){e=P(s,"DIV",{class:!0});var n=E(e);o&&o.l(n),n.forEach(h),this.h()},h(){k(e,"class","webcamSelector svelte-1n7z142")},m(s,n){V(s,e,n),o&&o.m(e,null)},p(s,[n]){i===(i=t(s))&&o?o.p(s,n):(o&&o.d(1),o=i&&i(s),o&&(o.c(),o.m(e,null)))},i:ue,o:ue,d(s){s&&h(e),o&&o.d()}}}function Yt(r,e,t){let i="start",o="",s,n=[],l=[],c,f;async function u(){t(0,i="busy"),t(2,s=void 0),t(1,o="Detecting Devices...");try{const R=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),S=await navigator.mediaDevices.enumerateDevices();if(t(3,n=S.filter(p=>p.kind==="videoinput")),t(4,l=S.filter(p=>p.kind==="audioinput")),n.length===0){t(0,i="start"),t(2,s=new Error("No devices found"));return}if(n.length===1){Fe.set(R),t(0,i="success");return}t(6,f=n[0].deviceId),t(5,c=l[0].deviceId),t(0,i="devicelist")}catch(R){t(2,s=R),t(0,i="start");return}}async function _(){t(2,s=void 0),t(0,i="busy"),t(1,o="Starting Webcam...");try{const R=await navigator.mediaDevices.getUserMedia({video:{deviceId:f},audio:{deviceId:c}});Fe.set(R),t(0,i="success")}catch(R){t(2,s=R),t(0,i="devicelist")}}function g(){f=Je(this),t(6,f),t(3,n)}function I(){c=Je(this),t(5,c),t(4,l)}return[i,o,s,n,l,c,f,u,_,g,I]}class Gt extends pe{constructor(e){super(),ve(this,e,Yt,qt,be,{})}}function Kt(r){let e,t,i;return t=new Gt({}),{c(){e=D("div"),me(t.$$.fragment)},l(o){e=P(o,"DIV",{});var s=E(e);he(t.$$.fragment,s),s.forEach(h)},m(o,s){V(o,e,s),_e(t,e,null),i=!0},p:ue,i(o){i||(re(t.$$.fragment,o),i=!0)},o(o){ie(t.$$.fragment,o),i=!1},d(o){o&&h(e),ge(t)}}}function Zt(r){let e,t,i,o,s;return{c(){e=D("video"),t=j(),i=D("canvas"),this.h()},l(n){e=P(n,"VIDEO",{class:!0}),E(e).forEach(h),t=U(n),i=P(n,"CANVAS",{class:!0}),E(i).forEach(h),this.h()},h(){e.autoplay=!0,k(e,"class","svelte-1b7esxu"),Ee(e,"flippedHorizontal",r[1]),k(i,"class","svelte-1b7esxu"),Ee(i,"flippedHorizontal",r[1])},m(n,l){V(n,e,l),r[23](e),e.muted=r[0],V(n,t,l),V(n,i,l),r[25](i),o||(s=[le(e,"play",r[7]),le(e,"loadeddata",r[6]),le(e,"volumechange",r[24])],o=!0)},p(n,l){l[0]&1&&(e.muted=n[0]),l[0]&2&&Ee(e,"flippedHorizontal",n[1]),l[0]&2&&Ee(i,"flippedHorizontal",n[1])},i:ue,o:ue,d(n){n&&h(e),r[23](null),n&&h(t),n&&h(i),r[25](null),o=!1,qe(s)}}}function Qt(r){let e,t,i,o;const s=[Zt,Kt],n=[];function l(c,f){return c[4]?0:1}return t=l(r),i=n[t]=s[t](r),{c(){e=D("div"),i.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var f=E(e);i.l(f),f.forEach(h),this.h()},h(){k(e,"class","wrapper svelte-1b7esxu")},m(c,f){V(c,e,f),n[t].m(e,null),r[26](e),o=!0},p(c,f){let u=t;t=l(c),t===u?n[t].p(c,f):(wt(),ie(n[u],1,1,()=>{n[u]=null}),yt(),i=n[t],i?i.p(c,f):(i=n[t]=s[t](c),i.c()),re(i,1),i.m(e,null))},i(c){o||(re(i),o=!0)},o(c){ie(i),o=!1},d(c){c&&h(e),n[t].d(),r[26](null)}}}const Xt=50;function Jt(r,e,t){let i;St(r,Fe,v=>t(4,i=v));const o=-1e3,s=Ye();let{poseEstimationEnabled:n=!1}=e,{drawSkeleton:l=!1}=e,{muted:c=!0}=e,{poseEstimationCheckFunction:f=()=>!0}=e,u=null,{customDrawFn:_=null}=e,g,{poseEstimationPrimedPromise:I=new Promise(v=>g=v)}=e,R=!1,S,p,z,M,F,w;const C=new Promise(v=>w=v);let{mirrorHorizontally:L=!0}=e,a=new Date().getTime(),m=-1,d=new Date().getTime(),A=-1,N=null,Z=1,W=1,Q=1,T=1,O=1,G=1;function X(){S&&(t(19,Z=S.videoWidth),t(20,W=S.videoHeight))}const J=()=>{p&&(G>Q?(t(3,p.height=O,p),t(3,p.width=O*Q,p)):(t(3,p.width=T,p),t(3,p.height=T/Q,p)))};function $(){return t(16,u=rt),t(16,u.onmessage=v=>{if(v.data.type===Te.poseEstimation){if(d=new Date().getTime(),v.data.frameId===o){g==null||g();return}A=v.data.frameId,N=v.data.estimatedPose;const de={frameId:v.data.frameId,estimatedPose:v.data.estimatedPose,srcWidth:v.data.srcWidth,srcHeight:v.data.srcHeight};s("poseEstimationResult",de)}else v.data.type===Te.error||v.data.type===Te.resetError?(console.error("PoseEstim Error Message",v.data.type,v.data.error),v.data.frameId===m&&(m=-1,N=null)):v.data.type==Te.resetComplete&&(console.log("Pose Estimation Reset Complete"),m=-1,N=null)},u),rt.postMessage({type:He.reset,frameId:new Date().getTime()}),u.ready}async function oe(){if(!n||!u||!M||!p)throw new Error("Pose estimation not enabled, or not yet ready.");return console.log("Priming pose estimation"),t(8,I=new Promise(v=>g=v)),u.postMessage({type:He.requestPoseEstimation,frameId:o,image:M.getImageData(0,0,p.width,p.height)}),I}We(async()=>{n&&$(),await Rt(),J();const v=new ResizeObserver(de=>{if(!z)return;const[se,y]=Lt(z);t(21,T=se),t(22,O=y)});return v.observe(z),()=>{u==null||u.terminate(),v.unobserve(z)}});function ee(){!S||!i||(t(2,S.srcObject=i,S),t(17,R=!0),w&&(w(),w=void 0))}let q=0;function ne(){if(!p||!S||!i||!M)return;q+=1;const v=S.videoWidth/S.videoHeight,de=p.width/p.height;let se=p.width,y=p.height,te=0,fe=0;if(v>de?(y=p.width/v,fe=(p.height-y)/2):(se=y*v,te=(p.width-se)/2),M.drawImage(S,te,fe,se,y),!(te>=0&&fe>=0&&se>0&&y>0&&de>0&&v>0)){requestAnimationFrame(ne);return}const ke=new Date().getTime(),we=ke-d;if(n&&A==m&&we>Xt&&f()){const ae=ke-a;m=q,s("poseEstimationFrameSent",{frameId:q,timestampMs:ae}),u==null||u.postMessage({type:He.requestPoseEstimation,frameId:q,timestampMs:ae,image:M.getImageData(te,fe,se,y)})}if(_==null||_(M,N),!l){requestAnimationFrame(ne);return}M.save(),N&&N.length===je.length&&(F==null||F.drawConnectors(N,Ft.POSE_CONNECTIONS),F==null||F.drawLandmarks(N,{radius:ae=>ze.lerp(ae.from.z,-.15,.1,5,1)})),M.restore(),requestAnimationFrame(ne)}We(()=>(ee(),{}));function Me(v){ce[v?"unshift":"push"](()=>{S=v,t(2,S)})}function Ae(){c=this.muted,t(0,c)}function Oe(v){ce[v?"unshift":"push"](()=>{p=v,t(3,p)})}function Re(v){ce[v?"unshift":"push"](()=>{z=v,t(5,z)})}return r.$$set=v=>{"poseEstimationEnabled"in v&&t(9,n=v.poseEstimationEnabled),"drawSkeleton"in v&&t(10,l=v.drawSkeleton),"muted"in v&&t(0,c=v.muted),"poseEstimationCheckFunction"in v&&t(11,f=v.poseEstimationCheckFunction),"customDrawFn"in v&&t(12,_=v.customDrawFn),"poseEstimationPrimedPromise"in v&&t(8,I=v.poseEstimationPrimedPromise),"mirrorHorizontally"in v&&t(1,L=v.mirrorHorizontally)},r.$$.update=()=>{r.$$.dirty[0]&1572864&&(Q=Z/W),r.$$.dirty[0]&6291456&&(G=T/O),r.$$.dirty[0]&66048&&n&&!u&&$(),r.$$.dirty[0]&20&&i&&S&&ee(),r.$$.dirty[0]&7864320&&Z&&W&&T&&O&&J(),r.$$.dirty[0]&393228&&R&&S&&p&&(t(18,M=p.getContext("2d",{willReadFrequently:!0})),F=new ze(M),ne())},[c,L,S,p,i,z,X,J,I,n,l,f,_,C,$,oe,u,R,M,Z,W,T,O,Me,Ae,Oe,Re]}class xt extends pe{constructor(e){super(),ve(this,e,Jt,Qt,be,{poseEstimationEnabled:9,drawSkeleton:10,muted:0,poseEstimationCheckFunction:11,customDrawFn:12,poseEstimationPrimedPromise:8,webcamStartedPromise:13,mirrorHorizontally:1,setupPoseEstimation:14,primePoseEstimation:15},null,[-1,-1])}get webcamStartedPromise(){return this.$$.ctx[13]}get setupPoseEstimation(){return this.$$.ctx[14]}get primePoseEstimation(){return this.$$.ctx[15]}}function $t({params:r}){const e=r.danceTreeId,[t,i]=Vt(e);if(!t)throw Qe(404,"Dance Not found");if(!i)throw Qe(404,"Dance Tree Not found");const o=Mt(i,r.practiceNodeId);return{dance:t,danceTree:i,danceTreeNode:o}}const er=!1,qr=Object.freeze(Object.defineProperty({__proto__:null,load:$t,prerender:er},Symbol.toStringTag,{value:"Module"}));function tr(r,e,t,i){return{startTime:t.start_time,endTime:t.end_time,activityTypes:["drill"],playbackSpeed:.5}}let Ie;const rr=new Uint8Array(16);function ir(){if(!Ie&&(Ie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(rr)}const Y=[];for(let r=0;r<256;++r)Y.push((r+256).toString(16).slice(1));function or(r,e=0){return(Y[r[e+0]]+Y[r[e+1]]+Y[r[e+2]]+Y[r[e+3]]+"-"+Y[r[e+4]]+Y[r[e+5]]+"-"+Y[r[e+6]]+Y[r[e+7]]+"-"+Y[r[e+8]]+Y[r[e+9]]+"-"+Y[r[e+10]]+Y[r[e+11]]+Y[r[e+12]]+Y[r[e+13]]+Y[r[e+14]]+Y[r[e+15]]).toLowerCase()}const nr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),at={randomUUID:nr};function ct(r,e,t){if(at.randomUUID&&!e&&!r)return at.randomUUID();r=r||{};const i=r.random||(r.rng||ir)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(let o=0;o<16;++o)e[t+o]=i[o];return e}return or(i)}const ut=Object.freeze(["Nice Job!","Great Moves!","You're Killing It!","Awesome Dancing!","Keep It Up!","Incredible Rhythm!","Impressive Dancing!","Amazing Performance!","You've Got the Groove!","You're a Dancing Machine!","Phenomenal Footwork!","You're a Star!","Excellent Execution!","You're on Fire!","Superb Dancing!","You're a Pro!","Outstanding Performance!"]);function sr(){return ut[Math.floor(Math.random()*ut.length)]}const dt=Object.freeze(["Don't Give Up!","Keep Pushing!","You've Got This!","Stay Strong!","Keep Going!","Believe In Yourself!","Stay Focused!","Never Give Up!","You Can Do It!","Stay Motivated!","Keep Moving Forward!","Stay Resilient!","Stay Positive!","Stay Determined!","Stay Committed!","Stay Persistent!","Stay Confident!","Stay Inspired!","Stay Driven!","Stay Tenacious!"]);function lr(){return dt[Math.floor(Math.random()*dt.length)]}const Ve=Object.freeze([[K.leftShoulder,K.rightShoulder],[K.leftShoulder,K.leftHip],[K.leftHip,K.rightHip],[K.rightHip,K.rightShoulder],[K.leftShoulder,K.leftElbow],[K.leftElbow,K.leftWrist],[K.rightShoulder,K.rightElbow],[K.rightElbow,K.rightWrist]]),Pt=Ve.map((r,e)=>{const[t,i]=r,[o,s]=[je[t],je[i]];return`${o} -> ${s}`}),ar=new Map(Pt.map((r,e)=>[r,e]));function cr(r,e,t,i,o){const s=t-e,n=o-i;return i+n*((r-e)/s)}function Tt(r){return Math.pow(Math.pow(r[0],2)+Math.pow(r[1],2),.5)}function ur(r){return r.reduce((e,t)=>e+t,0)}function Ue(r){return ur(r)/r.length}function ft(r,e,t){const{x:i,y:o}=r[e],{x:s,y:n}=r[t],[l,c]=[s-i,n-o],f=Tt([l,c]);return[l/f,c/f]}function dr(r,e){return 0}function fr(r,e){let t=0;const i=Ve.map(_=>{const[g,I]=_,[R,S]=ft(r,g,I),[p,z]=ft(e,g,I),[M,F]=[R-p,S-z];return Tt([M,F])||0});t=Ue(i);const o=2,s=0,n=5,l=0;function c(_){return cr(_,s,o,n,l)}const f=c(t),u=i.map(c);return[f,u]}class mr{constructor(){Be(this,"tracks",new Map)}recordEvaluationFrame(e,t,i,o){var c;const s=Object.keys(o);this.tracks.has(e)||this.tracks.set(e,{creationDate:new Date,frameTimes:[],recordTimesMs:[],userPoses:[],evaluation:s.reduce((f,u)=>(f[u]=[],f),{})});const n=((c=this.tracks.get(e))==null?void 0:c.frameTimes.slice(-1)[0])??-1/0;if(t<n)throw new Error("Frame time must be increasing");const l=this.tracks.get(e);l.frameTimes.push(t),l.recordTimesMs.push(new Date().getTime()),l.userPoses.push(i);for(const f of s)l.evaluation[f].push(o[f])}}const hr=new Map([[0,"torso"],[1,"torso"],[2,"torso"],[3,"torso"],[4,"leftarm"],[5,"leftarm"],[6,"rightarm"],[7,"rightarm"]]);class _r{constructor(e){Be(this,"recorder",new mr);this.referenceData=e}evaluateFrame(e,t,i){const o=this.referenceData.getReferencePoseAtTime(t);if(!o)return null;const[s,n]=fr(o,i),l=dr(),c={qijiaOverallScore:s,qijiaByVectorScores:n,julienScore:l};return this.recorder.recordEvaluationFrame(e,t,i,c),c}getPerformanceSummary(e){const t=this.recorder.tracks.get(e);if(!t)return null;const i=Ve.map((_,g)=>{const I=Pt[g],R=t.evaluation.qijiaByVectorScores.map(p=>p[g]),S=Ue(R);return[I,S]}),o=Ue(t.evaluation.qijiaOverallScore),s=new Map(i),n=t.frameTimes.length,l=(t.recordTimesMs[n-1]-t.recordTimesMs[0])/1e3,c=t.frameTimes[n-1]-t.frameTimes[0],f=n/c,u=n/l;return{frameCount:n,danceTimeDurationSecs:c,realtimeDurationSecs:l,danceTimeFps:f,realTimeFps:u,qijiaOverallScore:o,qijiaByVectorScores:s}}generateTerminalFeedback(e){if(!e)return{headline:"Try Again?",subHeadline:"We don't have any feedback for you.",suggestedAction:"repeat"};const{qijiaOverallScore:t,qijiaByVectorScores:i}=e;let o,s,n,l;const[c,f]=[...i.keys()].map(u=>{const _=ar.get(u);if(_===void 0)throw new Error("Unexpected vector name: "+u);const g=i.get(u);if(g===void 0)throw new Error("Unable to retrieve score for "+u);return[_,g]}).reduce(([u,_],[g,I])=>I<_?[g,I]:[u,_],[-1,1/0]);if(t>4)o=sr(),s="You did great on that trial! Would you like to move on now?",n="next";else{o=lr(),s="Want to try again?",n="repeat";const u=hr.get(c);if(!u)throw new Error("Unexpected vector index: "+c);l=[u]}return{headline:o,subHeadline:s,score:{achieved:t,maximumPossible:5},suggestedAction:n,incorrectBodyParts:l}}}const gr=4.5,pr=3.5,vr=Ve.map(([r,e])=>({start:r,end:e}));function br(r,e){const t=e==null?void 0:e.qijiaByVectorScores[r.index??-1];return t===void 0?"white":t>=gr?"green":t>=pr?"yellow":"red"}function kr(r,e,t){if(!e)return;new ze(r).drawConnectors(e,vr,{color:o=>br(o,t),lineWidth:4})}const wr=""+new URL("../assets/metronome.208d4270.mp3",import.meta.url).href;function mt(r,e,t){const i=r.slice();return i[9]=e[t],i[11]=t,i}function ht(r){let e,t,i;return{c(){e=Et("path"),this.h()},l(o){e=Dt(o,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),E(e).forEach(h),this.h()},h(){k(e,"d",r[2][r[9]]),k(e,"fill",t=r[0][r[11]]),k(e,"stroke",i=r[1][r[11]]),k(e,"stroke-width","0.5")},m(o,s){V(o,e,s)},p(o,s){s&1&&t!==(t=o[0][o[11]])&&k(e,"fill",t),s&2&&i!==(i=o[1][o[11]])&&k(e,"stroke",i)},d(o){o&&h(e)}}}function yr(r){let e,t=r[3],i=[];for(let o=0;o<t.length;o+=1)i[o]=ht(mt(r,t,o));return{c(){e=Et("svg");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=Dt(o,"svg",{xmlns:!0,viewBox:!0,preserveAspectRatio:!0,class:!0});var s=E(e);for(let n=0;n<i.length;n+=1)i[n].l(s);s.forEach(h),this.h()},h(){k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 -1 14 55"),k(e,"preserveAspectRatio","xMinYMin slice"),k(e,"class","svelte-1dgy757")},m(o,s){V(o,e,s);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,null)},p(o,[s]){if(s&15){t=o[3];let n;for(n=0;n<t.length;n+=1){const l=mt(o,t,n);i[n]?i[n].p(l,s):(i[n]=ht(l),i[n].c(),i[n].m(e,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}},i:ue,o:ue,d(o){o&&h(e),Ce(i,o)}}}function Sr(r,e,t){let{highlightBodyParts:i=[]}=e,{stdFillColor:o="#000"}=e,{stdOutlineColor:s="#AAA"}=e,{highlightFillColor:n="#000"}=e,{highlightOutlineColor:l="#77F"}=e;const c={head:"M 7 0 C 9.5 0 10 2 10 4 S 8.5 8 7 8 S 4 6 4 4 S 4.5 0 7 0 Z",torso:"M 7 10 C 10 10 12 10 12 11 S 10.5 18 10.5 21 S 11 26 11 27 S 9 28 7 28 S 3 28 3 27 S 3.5 24 3.5 21 S 2 12 2 11 S 4 10 7 10 Z",leftleg:"M 8 29 L 8.5 40 L 8.25 50 C 8.25 51 8.35 52 8.5 53.5 C 9.5 53.5 10.75 53.5 10.5 53 L 9.5 51 L 10.5 41 L 10.5 40 L 11 29 C 11 28.25 8 28.25 8 29 Z",rightleg:"M 6 29 L 5.5 40 L 5.75 50 C 5.75 51 5.65 52 5.5 53.5 C 4.5 53.5 3.25 53.5 3.5 53 L 4.5 51 L 3.5 41 L 3.5 40 L 3 29 C 3 28.25 6 28.25 6 29 Z",leftarm:"M 12.25 11 C 12.75 11.5 12.75 12 13 13 C 13.5 16 13.75 18 13.75 20 S 13 25 13 26 S 13.2 27 13.2 28 S 12 29 12 28.5 S 11.75 27 12 26 C 12.25 25 12 22 12.5 20 C 12.1 14 11.5 15 12.2 11 Z",rightarm:"M 1.75 11 C 1.25 11.5 1.25 12 1 13 C 0.5 16 0.25 18 0.25 20 S 1 25 1 26 S 0.8 27 0.8 28 S 2 29 2 28.5 S 2.25 27 2 26 C 1.75 25 2 22 1.5 20 C 1.9 14 2.5 15 1.8 11 Z"},f=Object.keys(c);let u=Array(f.length).fill(o),_=Array(f.length).fill(s);return r.$$set=g=>{"highlightBodyParts"in g&&t(4,i=g.highlightBodyParts),"stdFillColor"in g&&t(5,o=g.stdFillColor),"stdOutlineColor"in g&&t(6,s=g.stdOutlineColor),"highlightFillColor"in g&&t(7,n=g.highlightFillColor),"highlightOutlineColor"in g&&t(8,l=g.highlightOutlineColor)},r.$$.update=()=>{r.$$.dirty&176&&t(0,u=f.map(g=>i.includes(g)?n:o)),r.$$.dirty&336&&t(1,_=f.map(g=>i.includes(g)?l:s))},[u,_,c,f,i,o,s,n,l]}class Er extends pe{constructor(e){super(),ve(this,e,Sr,yr,be,{highlightBodyParts:4,stdFillColor:5,stdOutlineColor:6,highlightFillColor:7,highlightOutlineColor:8})}}function _t(r,e,t){const i=r.slice();return i[7]=e[t],i}function gt(r){let e,t,i,o=r[0].score.achieved.toFixed(2)+"",s,n,l=r[0].score.maximumPossible.toFixed(2)+"",c;return{c(){e=D("p"),t=D("code"),i=B("Score: "),s=B(o),n=B(" / "),c=B(l),this.h()},l(f){e=P(f,"P",{class:!0});var u=E(e);t=P(u,"CODE",{});var _=E(t);i=H(_,"Score: "),s=H(_,o),n=H(_," / "),c=H(_,l),_.forEach(h),u.forEach(h),this.h()},h(){k(e,"class","svelte-1xujmdv")},m(f,u){V(f,e,u),b(e,t),b(t,i),b(t,s),b(t,n),b(t,c)},p(f,u){u&1&&o!==(o=f[0].score.achieved.toFixed(2)+"")&&x(s,o),u&1&&l!==(l=f[0].score.maximumPossible.toFixed(2)+"")&&x(c,l)},d(f){f&&h(e)}}}function pt(r){let e,t,i=r[7]+"",o,s;return{c(){e=D("p"),t=B("Try focusing on your "),o=B(i),s=B(" next time."),this.h()},l(n){e=P(n,"P",{class:!0});var l=E(e);t=H(l,"Try focusing on your "),o=H(l,i),s=H(l," next time."),l.forEach(h),this.h()},h(){k(e,"class","svelte-1xujmdv")},m(n,l){V(n,e,l),b(e,t),b(e,o),b(e,s)},p(n,l){l&1&&i!==(i=n[7]+"")&&x(o,i)},d(n){n&&h(e)}}}function Dr(r){var A,N,Z,W,Q;let e,t,i=((A=r[0])==null?void 0:A.headline)+"",o,s,n,l=((N=r[0])==null?void 0:N.subHeadline)+"",c,f,u,_,g,I,R,S,p,z,M,F,w,C,L,a=((Z=r[0])==null?void 0:Z.score)&&gt(r),m=((W=r[0])==null?void 0:W.incorrectBodyParts)??[],d=[];for(let T=0;T<m.length;T+=1)d[T]=pt(_t(r,m,T));return I=new Er({props:{highlightBodyParts:((Q=r[0])==null?void 0:Q.incorrectBodyParts)??[]}}),{c(){e=D("div"),t=D("h2"),o=B(i),s=j(),n=D("p"),c=B(l),f=j(),a&&a.c(),u=j();for(let T=0;T<d.length;T+=1)d[T].c();_=j(),g=D("div"),me(I.$$.fragment),R=j(),S=D("button"),p=B(r[1]),z=j(),M=D("button"),F=B(r[2]),this.h()},l(T){e=P(T,"DIV",{class:!0});var O=E(e);t=P(O,"H2",{class:!0});var G=E(t);o=H(G,i),G.forEach(h),s=U(O),n=P(O,"P",{class:!0});var X=E(n);c=H(X,l),X.forEach(h),f=U(O),a&&a.l(O),u=U(O);for(let ee=0;ee<d.length;ee+=1)d[ee].l(O);_=U(O),g=P(O,"DIV",{class:!0});var J=E(g);he(I.$$.fragment,J),J.forEach(h),R=U(O),S=P(O,"BUTTON",{class:!0});var $=E(S);p=H($,r[1]),$.forEach(h),z=U(O),M=P(O,"BUTTON",{class:!0});var oe=E(M);F=H(oe,r[2]),oe.forEach(h),O.forEach(h),this.h()},h(){k(t,"class","svelte-1xujmdv"),k(n,"class","sub-headline svelte-1xujmdv"),k(g,"class","skeleton svelte-1xujmdv"),k(S,"class","outlined"),k(M,"class","outlined thin"),k(e,"class","feedbackForm svelte-1xujmdv")},m(T,O){V(T,e,O),b(e,t),b(t,o),b(e,s),b(e,n),b(n,c),b(e,f),a&&a.m(e,null),b(e,u);for(let G=0;G<d.length;G+=1)d[G]&&d[G].m(e,null);b(e,_),b(e,g),_e(I,g,null),b(e,R),b(e,S),b(S,p),b(e,z),b(e,M),b(M,F),w=!0,C||(L=[le(S,"click",r[3]),le(M,"click",r[4])],C=!0)},p(T,[O]){var X,J,$,oe,ee;if((!w||O&1)&&i!==(i=((X=T[0])==null?void 0:X.headline)+"")&&x(o,i),(!w||O&1)&&l!==(l=((J=T[0])==null?void 0:J.subHeadline)+"")&&x(c,l),($=T[0])!=null&&$.score?a?a.p(T,O):(a=gt(T),a.c(),a.m(e,u)):a&&(a.d(1),a=null),O&1){m=((oe=T[0])==null?void 0:oe.incorrectBodyParts)??[];let q;for(q=0;q<m.length;q+=1){const ne=_t(T,m,q);d[q]?d[q].p(ne,O):(d[q]=pt(ne),d[q].c(),d[q].m(e,_))}for(;q<d.length;q+=1)d[q].d(1);d.length=m.length}const G={};O&1&&(G.highlightBodyParts=((ee=T[0])==null?void 0:ee.incorrectBodyParts)??[]),I.$set(G),(!w||O&2)&&x(p,T[1]),(!w||O&4)&&x(F,T[2])},i(T){w||(re(I.$$.fragment,T),w=!0)},o(T){ie(I.$$.fragment,T),w=!1},d(T){T&&h(e),a&&a.d(),Ce(d,T),ge(I),C=!1,qe(L)}}}function Pr(r,e,t){const i=Ye();let{feedback:o=null}=e,s=!1,n="",l="";function c(){i(s?"repeat-clicked":"continue-clicked")}function f(){i(s?"continue-clicked":"repeat-clicked")}return r.$$set=u=>{"feedback"in u&&t(0,o=u.feedback)},r.$$.update=()=>{r.$$.dirty&1&&t(5,s=(o==null?void 0:o.suggestedAction)==="repeat"),r.$$.dirty&32&&t(1,n=s?"Do Again 🔁":"Continue ➡️"),r.$$.dirty&32&&t(2,l=s?"Continue ➡️":"Do Again 🔁")},[o,n,l,c,f,s]}class Tr extends pe{constructor(e){super(),ve(this,e,Pr,Dr,be,{feedback:0})}}function Ir(r){let e,t;return{c(){e=D("source"),this.h()},l(i){e=P(i,"SOURCE",{src:!0,type:!0}),this.h()},h(){et(e.src,t=r[8])||k(e,"src",t),k(e,"type","video/mp4")},m(i,o){V(i,e,o)},p(i,o){o[0]&256&&!et(e.src,t=i[8])&&k(e,"src",t)},d(i){i&&h(e)}}}function vt(r){let e,t,i;return{c(){e=D("div"),t=D("span"),i=B(r[13]),this.h()},l(o){e=P(o,"DIV",{class:!0});var s=E(e);t=P(s,"SPAN",{class:!0});var n=E(t);i=H(n,r[13]),n.forEach(h),s.forEach(h),this.h()},h(){k(t,"class","count svelte-3894ek"),k(e,"class","countdown svelte-3894ek")},m(o,s){V(o,e,s),b(e,t),b(t,i)},p(o,s){s[0]&8192&&x(i,o[13])},d(o){o&&h(e)}}}function bt(r){let e,t,i;return t=new Tr({props:{feedback:r[12]}}),t.$on("repeat-clicked",r[1]),t.$on("continue-clicked",r[33]),{c(){e=D("div"),me(t.$$.fragment),this.h()},l(o){e=P(o,"DIV",{class:!0});var s=E(e);he(t.$$.fragment,s),s.forEach(h),this.h()},h(){k(e,"class","svelte-3894ek")},m(o,s){V(o,e,s),_e(t,e,null),i=!0},p(o,s){const n={};s[0]&4096&&(n.feedback=o[12]),t.$set(n)},i(o){i||(re(t.$$.fragment,o),i=!0)},o(o){ie(t.$$.fragment,o),i=!1},d(o){o&&h(e),ge(t)}}}function kt(r){let e,t,i;return{c(){e=D("div"),t=D("div"),i=B("Loading..."),this.h()},l(o){e=P(o,"DIV",{class:!0});var s=E(e);t=P(s,"DIV",{class:!0});var n=E(t);i=H(n,"Loading..."),n.forEach(h),s.forEach(h),this.h()},h(){k(t,"class","label svelte-3894ek"),k(e,"class","loading outlined thick svelte-3894ek")},m(o,s){V(o,e,s),b(e,t),b(t,i)},d(o){o&&h(e)}}}function Cr(r){let e,t,i,o,s,n,l,c,f,u,_,g,I,R;function S(m){r[29](m)}function p(m){r[30](m)}function z(m){r[31](m)}function M(m){r[32](m)}let F={flipHorizontal:r[0],fitToFlexbox:Fr,poseData:r[10],drawSkeleton:!1,$$slots:{default:[Ir]},$$scope:{ctx:r}};r[3]!==void 0&&(F.currentTime=r[3]),r[7]!==void 0&&(F.playbackRate=r[7]),r[5]!==void 0&&(F.paused=r[5]),r[4]!==void 0&&(F.duration=r[4]),i=new Nt({props:F}),ce.push(()=>De(i,"currentTime",S)),ce.push(()=>De(i,"playbackRate",p)),ce.push(()=>De(i,"paused",z)),ce.push(()=>De(i,"duration",M));let w=r[13]>=0&&vt(r),C=r[2]==="feedback"&&bt(r),L={poseEstimationEnabled:r[9],drawSkeleton:!1,poseEstimationCheckFunction:r[16],customDrawFn:r[34]};g=new xt({props:L}),r[35](g),g.$on("poseEstimationFrameSent",r[15]),g.$on("poseEstimationResult",r[17]);let a=r[2]==="waitStart"&&kt();return{c(){e=D("section"),t=D("div"),me(i.$$.fragment),c=j(),w&&w.c(),f=j(),C&&C.c(),u=j(),_=D("div"),me(g.$$.fragment),I=j(),a&&a.c(),this.h()},l(m){e=P(m,"SECTION",{class:!0});var d=E(e);t=P(d,"DIV",{class:!0});var A=E(t);he(i.$$.fragment,A),c=U(A),w&&w.l(A),A.forEach(h),f=U(d),C&&C.l(d),u=U(d),_=P(d,"DIV",{class:!0});var N=E(_);he(g.$$.fragment,N),I=U(N),a&&a.l(N),N.forEach(h),d.forEach(h),this.h()},h(){k(t,"class","svelte-3894ek"),k(_,"class","svelte-3894ek"),$e(_,"display",r[2]==="feedback"?"none":"flex"),k(e,"class","practicePage svelte-3894ek")},m(m,d){V(m,e,d),b(e,t),_e(i,t,null),b(t,c),w&&w.m(t,null),b(e,f),C&&C.m(e,null),b(e,u),b(e,_),_e(g,_,null),b(_,I),a&&a.m(_,null),R=!0},p(m,d){const A={};d[0]&1&&(A.flipHorizontal=m[0]),d[0]&1024&&(A.poseData=m[10]),d[0]&256|d[1]&16384&&(A.$$scope={dirty:d,ctx:m}),!o&&d[0]&8&&(o=!0,A.currentTime=m[3],Pe(()=>o=!1)),!s&&d[0]&128&&(s=!0,A.playbackRate=m[7],Pe(()=>s=!1)),!n&&d[0]&32&&(n=!0,A.paused=m[5],Pe(()=>n=!1)),!l&&d[0]&16&&(l=!0,A.duration=m[4],Pe(()=>l=!1)),i.$set(A),m[13]>=0?w?w.p(m,d):(w=vt(m),w.c(),w.m(t,null)):w&&(w.d(1),w=null),m[2]==="feedback"?C?(C.p(m,d),d[0]&4&&re(C,1)):(C=bt(m),C.c(),re(C,1),C.m(e,u)):C&&(wt(),ie(C,1,1,()=>{C=null}),yt());const N={};d[0]&512&&(N.poseEstimationEnabled=m[9]),d[0]&2048&&(N.customDrawFn=m[34]),g.$set(N),m[2]==="waitStart"?a||(a=kt(),a.c(),a.m(_,null)):a&&(a.d(1),a=null),d[0]&4&&$e(_,"display",m[2]==="feedback"?"none":"flex")},i(m){R||(re(i.$$.fragment,m),re(C),re(g.$$.fragment,m),R=!0)},o(m){ie(i.$$.fragment,m),ie(C),ie(g.$$.fragment,m),R=!1},d(m){m&&h(e),ge(i),w&&w.d(),C&&C.d(),r[35](null),ge(g),a&&a.d()}}}let Fr=!0;const Vr=10;async function ye(r){return new Promise(e=>{setTimeout(e,(r??1)*1e3)})}function Mr(r,e,t){let i;St(r,Fe,y=>t(28,i=y));let{mirrorForEvaluation:o=!0}=e,{dance:s}=e,{practiceActivity:n}=e,{pageActive:l=!1}=e,{flipVideo:c=!1}=e;const f=Ye();let u="waitWebcam",_=0,g="watch",I=1,R=new Audio(wr),S,p=0,z=1,M=0,F=!0,w="",C=!1,L=null,a=null,m=null,d=null,A=ct(),N=null,Z=null,W=-1,Q=!1;function T(){R.currentTime=0,R.play()}async function O(){Q||(t(5,F=!0),t(3,p=(n==null?void 0:n.startTime)??0),t(25,A=ct()),C&&(console.log("Triggering pose estimation priming"),await S.primePoseEstimation()),t(2,u="countdown"),t(27,Q=!0),await ye(I),t(13,W=5),T(),await ye(I),t(13,W=6),T(),await ye(I),t(13,W=7),T(),await ye(I),t(13,W=8),T(),await ye(I),t(2,u="playing"),t(13,W=-1),t(5,F=!1),t(27,Q=!1))}async function G(){t(22,_=0),t(2,u="waitWebcam"),t(11,m=null),t(5,F=!0),t(3,p=(n==null?void 0:n.startTime)??0),t(10,a=await Ot(s)),await S.webcamStartedPromise,t(2,u="waitStart"),t(24,d=new _r(a)),await L,O()}let X=new Map,J=-1,$=new Date;const oe=1e3/Vr;function ee(y){X.set(y.detail.frameId,p),J=p}function q(){return!(J===p&&$.getTime()>Date.now()-oe)}function ne(y){var Ge,Ke,Ze;if(u!=="playing")return;if(!a){console.log("No dance pose information",y);return}const te=y.detail.frameId;if(!X.has(te)){console.log(`No matching correspondance for ${te}`,y,"current correspondances: ",X);return}const fe=X.get(te);X.delete(te);const Le=(Ge=y==null?void 0:y.detail)==null?void 0:Ge.srcWidth,ke=(Ke=y==null?void 0:y.detail)==null?void 0:Ke.srcHeight,we=((Ze=y==null?void 0:y.detail)==null?void 0:Ze.estimatedPose)??null;if(!we)return;let ae=tt(we,Le,ke);if(o){const Ne=Ht(we);ae=tt(Ne,Le,ke)}if(ae)try{t(11,m=(d==null?void 0:d.evaluateFrame(A,fe,ae))??null)}catch(Ne){t(11,m=null),console.warn("Error evaluating frame",Ne)}}We(()=>(t(3,p=(n==null?void 0:n.startTime)??0),L=S.setupPoseEstimation(),G(),{}));function Me(y){p=y,t(3,p)}function Ae(y){z=y,t(7,z),t(20,n)}function Oe(y){F=y,t(5,F),t(20,n),t(3,p),t(4,M),t(24,d),t(25,A),t(26,N)}function Re(y){M=y,t(4,M)}const v=()=>f("continue-clicked"),de=(y,te)=>kr(y,te,m);function se(y){ce[y?"unshift":"push"](()=>{S=y,t(6,S)})}return r.$$set=y=>{"mirrorForEvaluation"in y&&t(18,o=y.mirrorForEvaluation),"dance"in y&&t(19,s=y.dance),"practiceActivity"in y&&t(20,n=y.practiceActivity),"pageActive"in y&&t(21,l=y.pageActive),"flipVideo"in y&&t(0,c=y.flipVideo)},r.$$.update=()=>{r.$$.dirty[0]&118489112&&(n!=null&&n.endTime&&p>=n.endTime||M>0&&p>=M)&&(t(5,F=!0),t(26,N=(d==null?void 0:d.getPerformanceSummary(A))??null),t(12,Z=(d==null?void 0:d.generateTerminalFeedback(N))??null),t(2,u="feedback")),r.$$.dirty[0]&268435460&&i&&u==="waitWebcam"&&t(2,u="waitStart"),r.$$.dirty[0]&4&&console.log("PracticePage state",u),r.$$.dirty[0]&5242880&&n&&t(23,g=n.activityTypes[_]),r.$$.dirty[0]&524288&&(I=s!=null&&s.bpm?60/s.bpm:1),r.$$.dirty[0]&16&&console.log("VideoDuration",M),r.$$.dirty[0]&524288&&t(8,w=At(s)),r.$$.dirty[0]&144703520&&t(9,C=l&&(Q||!F)&&g==="drill"),r.$$.dirty[0]&1048576&&t(7,z=(n==null?void 0:n.playbackSpeed)??1)},[c,G,u,p,M,F,S,z,w,C,a,m,Z,W,f,ee,q,ne,o,s,n,l,_,g,d,A,N,Q,i,Me,Ae,Oe,Re,v,de,se]}class Ar extends pe{constructor(e){super(),ve(this,e,Mr,Cr,be,{mirrorForEvaluation:18,dance:19,practiceActivity:20,pageActive:21,flipVideo:0,reset:1},null,[-1,-1])}get reset(){return this.$$.ctx[1]}}function Or(r){let e,t,i,o,s,n=r[2].tree_name+"",l,c;return t=new Ar({props:{dance:r[1],practiceActivity:r[3],pageActive:!0}}),t.$on("continue-clicked",r[5]),{c(){e=D("section"),me(t.$$.fragment),i=j(),o=D("a"),s=B("< "),l=B(n),this.h()},l(f){e=P(f,"SECTION",{class:!0});var u=E(e);he(t.$$.fragment,u),i=U(u),o=P(u,"A",{href:!0,class:!0});var _=E(o);s=H(_,"< "),l=H(_,n),_.forEach(h),u.forEach(h),this.h()},h(){k(o,"href",r[0]),k(o,"class","button outlined back svelte-4dzpk3"),k(e,"class","practiceNode svelte-4dzpk3")},m(f,u){V(f,e,u),_e(t,e,null),b(e,i),b(e,o),b(o,s),b(o,l),c=!0},p(f,[u]){(!c||u&1)&&k(o,"href",f[0])},i(f){c||(re(t.$$.fragment,f),c=!0)},o(f){ie(t.$$.fragment,f),c=!1},d(f){f&&h(e),ge(t)}}}function Rr(r,e,t){let{data:i}=e;const o=i.dance,s=i.danceTree,n=i.danceTreeNode,l=tr(o,s,n);let c="/teachlesson/"+Xe(s);const f=()=>Bt(c);return r.$$set=u=>{"data"in u&&t(4,i=u.data)},t(0,c="/teachlesson/"+Xe(s)),[c,o,s,l,i,f]}class Yr extends pe{constructor(e){super(),ve(this,e,Rr,Or,be,{data:4})}}export{Yr as component,qr as universal};
