import{j as x}from"./singletons.2bfcf5bd.js";import{S as $,i as ee,s as te,C as ie,k as W,a as ne,l as z,m as H,h as F,c as le,n as O,X as D,M as V,b as ae,D as A,N as v,E as oe,F as se,G as de,g as ue,d as fe,T as re,o as he,$ as ce,w as L}from"./index.eec1637c.js";import{b as me}from"./mediapipe-utils.57782937.js";import{D as _e,P as G}from"./index.04079824.js";function ge(t){var n=getComputedStyle(t);return[t.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),t.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)]}const ye=x("goto");function ve(t){let n,e,w=!1,T,r=!0,o,d,u,f,c,b;const m=t[23].default,s=ie(m,t,t[22],null);function _(){cancelAnimationFrame(T),e.paused||(T=ce(_),w=!0),t[25].call(e)}return{c(){n=W("div"),e=W("video"),s&&s.c(),o=ne(),d=W("div"),u=W("canvas"),this.h()},l(l){n=z(l,"DIV",{class:!0});var a=H(n);e=z(a,"VIDEO",{class:!0});var S=H(e);s&&s.l(S),S.forEach(F),o=le(a),d=z(a,"DIV",{class:!0});var h=H(d);u=z(h,"CANVAS",{class:!0}),H(u).forEach(F),h.forEach(F),a.forEach(F),this.h()},h(){O(e,"class","svelte-1clxmx5"),(t[0]===void 0||t[8]===void 0)&&D(_),(t[1]===void 0||t[2]===void 0)&&D(()=>t[29].call(e)),t[7]===void 0&&D(()=>t[30].call(e)),t[8]===void 0&&D(()=>t[31].call(e)),V(e,"flipped",t[10]),O(u,"class","svelte-1clxmx5"),O(d,"class","overlay svelte-1clxmx5"),O(n,"class","videoWithSkeleton svelte-1clxmx5"),V(n,"fitToFlexbox",t[9])},m(l,a){ae(l,n,a),A(n,e),s&&s.m(e,null),t[24](e),isNaN(t[3])||(e.playbackRate=t[3]),isNaN(t[5])||(e.volume=t[5]),e.muted=t[6],A(n,o),A(n,d),A(d,u),t[32](u),f=!0,c||(b=[v(e,"timeupdate",_),v(e,"ratechange",t[26]),v(e,"play",t[27]),v(e,"pause",t[27]),v(e,"volumechange",t[28]),v(e,"resize",t[29]),v(e,"durationchange",t[30]),v(e,"ended",t[31])],c=!0)},p(l,a){s&&s.p&&(!f||a[0]&4194304)&&oe(s,m,l,l[22],f?de(m,l[22],a,null):se(l[22]),null),!w&&a[0]&1&&!isNaN(l[0])&&(e.currentTime=l[0]),w=!1,a[0]&8&&!isNaN(l[3])&&(e.playbackRate=l[3]),a[0]&16&&r!==(r=l[4])&&e[r?"pause":"play"](),a[0]&32&&!isNaN(l[5])&&(e.volume=l[5]),a[0]&64&&(e.muted=l[6]),(!f||a[0]&1024)&&V(e,"flipped",l[10]),(!f||a[0]&512)&&V(n,"fitToFlexbox",l[9])},i(l){f||(ue(s,l),f=!0)},o(l){fe(s,l),f=!1},d(l){l&&F(n),s&&s.d(l),t[24](null),t[32](null),c=!1,re(b)}}}function be(t,n,e){let{$$slots:w={},$$scope:T}=n,r,o,d=null,u=null,{fitToFlexbox:f=!1}=n,{currentTime:c=0}=n,{playbackRate:b=1}=n,{paused:m=!0}=n,{volume:s=1}=n,{muted:_=!1}=n,{videoWidth:l=0}=n,{videoHeight:a=0}=n,{flipHorizontal:S=!1}=n,h=1,{duration:R=0}=n,{ended:k=!1}=n,{dance:I=null}=n,{poseData:y=null}=n,{drawSkeleton:P=!0}=n,g=0,N=0,E=1,C=null;function M(){o&&(d||e(16,d=o.getContext("2d")),d&&(u||(u=new _e(d)),d.clearRect(0,0,o.width,o.height),!(!C||!P)&&(u.drawConnectors(C,G.POSE_CONNECTIONS,{color:"white",lineWidth:4}),u.drawConnectors(C,G.POSE_CONNECTIONS,{color:"black",lineWidth:2}))))}he(()=>(new ResizeObserver(ke=>{if(!r)return;const[Z,p]=ge(r);e(18,g=Z),e(19,N=p)}).observe(r),()=>{}));function U(i){L[i?"unshift":"push"](()=>{r=i,e(12,r)})}function j(){c=this.currentTime,k=this.ended,e(0,c),e(8,k)}function q(){b=this.playbackRate,e(3,b)}function B(){m=this.paused,e(4,m)}function X(){s=this.volume,_=this.muted,e(5,s),e(6,_)}function J(){l=this.videoWidth,a=this.videoHeight,e(1,l),e(2,a)}function K(){R=this.duration,e(7,R)}function Q(){k=this.ended,e(8,k)}function Y(i){L[i?"unshift":"push"](()=>{o=i,e(11,o),e(20,E),e(17,h),e(18,g),e(19,N),e(1,l),e(2,a)})}return t.$$set=i=>{"fitToFlexbox"in i&&e(9,f=i.fitToFlexbox),"currentTime"in i&&e(0,c=i.currentTime),"playbackRate"in i&&e(3,b=i.playbackRate),"paused"in i&&e(4,m=i.paused),"volume"in i&&e(5,s=i.volume),"muted"in i&&e(6,_=i.muted),"videoWidth"in i&&e(1,l=i.videoWidth),"videoHeight"in i&&e(2,a=i.videoHeight),"flipHorizontal"in i&&e(10,S=i.flipHorizontal),"duration"in i&&e(7,R=i.duration),"ended"in i&&e(8,k=i.ended),"dance"in i&&e(13,I=i.dance),"poseData"in i&&e(14,y=i.poseData),"drawSkeleton"in i&&e(15,P=i.drawSkeleton),"$$scope"in i&&e(22,T=i.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&6&&l>0&&a>0&&e(17,h=l/a),t.$$.dirty[0]&786432&&g>0&&N>0&&e(20,E=g/N),t.$$.dirty[0]&1968128&&(o&&E>h?(e(11,o.width=g,o),e(11,o.height=N*h,o)):o&&E<=h&&(e(11,o.width=g,o),e(11,o.height=g/h,o))),t.$$.dirty[0]&16391){const i=(y==null?void 0:y.getReferencePoseAtTime(c))??null;e(21,C=i?me(i,l,a):null)}t.$$.dirty[0]&2197504&&M()},[c,l,a,b,m,s,_,R,k,f,S,o,r,I,y,P,d,h,g,N,E,C,T,w,U,j,q,B,X,J,K,Q,Y]}class Ee extends ${constructor(n){super(),ee(this,n,be,ve,te,{fitToFlexbox:9,currentTime:0,playbackRate:3,paused:4,volume:5,muted:6,videoWidth:1,videoHeight:2,flipHorizontal:10,duration:7,ended:8,dance:13,poseData:14,drawSkeleton:15},null,[-1,-1])}}export{Ee as V,ge as a,ye as g};
